/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/leads/route";
exports.ids = ["app/api/leads/route"];
exports.modules = {

/***/ "(rsc)/./node_modules/.pnpm/next@15.2.2_@playwright+test@1.57.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fleads%2Froute&page=%2Fapi%2Fleads%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fleads%2Froute.ts&appDir=D%3A%5CDelta%20IV%5CSofwares%5Cglass%5Csandbox%5Cshadcn-crm-dashboard%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CDelta%20IV%5CSofwares%5Cglass%5Csandbox%5Cshadcn-crm-dashboard&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@15.2.2_@playwright+test@1.57.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fleads%2Froute&page=%2Fapi%2Fleads%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fleads%2Froute.ts&appDir=D%3A%5CDelta%20IV%5CSofwares%5Cglass%5Csandbox%5Cshadcn-crm-dashboard%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CDelta%20IV%5CSofwares%5Cglass%5Csandbox%5Cshadcn-crm-dashboard&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/.pnpm/next@15.2.2_@playwright+test@1.57.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/.pnpm/next@15.2.2_@playwright+test@1.57.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/.pnpm/next@15.2.2_@playwright+test@1.57.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var D_Delta_IV_Sofwares_glass_sandbox_shadcn_crm_dashboard_src_app_api_leads_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/leads/route.ts */ \"(rsc)/./src/app/api/leads/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/leads/route\",\n        pathname: \"/api/leads\",\n        filename: \"route\",\n        bundlePath: \"app/api/leads/route\"\n    },\n    resolvedPagePath: \"D:\\\\Delta IV\\\\Sofwares\\\\glass\\\\sandbox\\\\shadcn-crm-dashboard\\\\src\\\\app\\\\api\\\\leads\\\\route.ts\",\n    nextConfigOutput,\n    userland: D_Delta_IV_Sofwares_glass_sandbox_shadcn_crm_dashboard_src_app_api_leads_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vbmV4dEAxNS4yLjJfQHBsYXl3cmlnaHQrdGVzdEAxLjU3LjBfcmVhY3QtZG9tQDE4LjMuMV9yZWFjdEAxOC4zLjFfX3JlYWN0QDE4LjMuMS9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZsZWFkcyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGbGVhZHMlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZsZWFkcyUyRnJvdXRlLnRzJmFwcERpcj1EJTNBJTVDRGVsdGElMjBJViU1Q1NvZndhcmVzJTVDZ2xhc3MlNUNzYW5kYm94JTVDc2hhZGNuLWNybS1kYXNoYm9hcmQlNUNzcmMlNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUQlM0ElNUNEZWx0YSUyMElWJTVDU29md2FyZXMlNUNnbGFzcyU1Q3NhbmRib3glNUNzaGFkY24tY3JtLWRhc2hib2FyZCZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBK0Y7QUFDdkM7QUFDcUI7QUFDNEM7QUFDekg7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHlHQUFtQjtBQUMzQztBQUNBLGNBQWMsa0VBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxzREFBc0Q7QUFDOUQ7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDMEY7O0FBRTFGIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkQ6XFxcXERlbHRhIElWXFxcXFNvZndhcmVzXFxcXGdsYXNzXFxcXHNhbmRib3hcXFxcc2hhZGNuLWNybS1kYXNoYm9hcmRcXFxcc3JjXFxcXGFwcFxcXFxhcGlcXFxcbGVhZHNcXFxccm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2xlYWRzL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvbGVhZHNcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2xlYWRzL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiRDpcXFxcRGVsdGEgSVZcXFxcU29md2FyZXNcXFxcZ2xhc3NcXFxcc2FuZGJveFxcXFxzaGFkY24tY3JtLWRhc2hib2FyZFxcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFxsZWFkc1xcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHdvcmtBc3luY1N0b3JhZ2UsXG4gICAgICAgIHdvcmtVbml0QXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/next@15.2.2_@playwright+test@1.57.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fleads%2Froute&page=%2Fapi%2Fleads%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fleads%2Froute.ts&appDir=D%3A%5CDelta%20IV%5CSofwares%5Cglass%5Csandbox%5Cshadcn-crm-dashboard%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CDelta%20IV%5CSofwares%5Cglass%5Csandbox%5Cshadcn-crm-dashboard&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/next@15.2.2_@playwright+test@1.57.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!*********************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@15.2.2_@playwright+test@1.57.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \*********************************************************************************************************************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./src/app/api/leads/route.ts":
/*!************************************!*\
  !*** ./src/app/api/leads/route.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/.pnpm/next@15.2.2_@playwright+test@1.57.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/api/server.js\");\n/* harmony import */ var _supabase_ssr__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @supabase/ssr */ \"@supabase/ssr\");\n/* harmony import */ var _supabase_ssr__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_supabase_ssr__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/.pnpm/next@15.2.2_@playwright+test@1.57.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/api/headers.js\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/.pnpm/zod@3.25.76/node_modules/zod/v3/types.js\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/.pnpm/zod@3.25.76/node_modules/zod/v3/ZodError.js\");\n/* harmony import */ var _server_repositories_leads__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/server/repositories/leads */ \"(rsc)/./src/server/repositories/leads.ts\");\n/* harmony import */ var _server_auth_getUserAndScope__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/server/auth/getUserAndScope */ \"(rsc)/./src/server/auth/getUserAndScope.ts\");\n\n\n\n\n\n\nconst leadCreateSchema = zod__WEBPACK_IMPORTED_MODULE_5__.object({\n    lead_number: zod__WEBPACK_IMPORTED_MODULE_5__.string().optional(),\n    full_name: zod__WEBPACK_IMPORTED_MODULE_5__.string().min(1, 'Full name is required'),\n    email: zod__WEBPACK_IMPORTED_MODULE_5__.string().email('Valid email is required'),\n    phone: zod__WEBPACK_IMPORTED_MODULE_5__.string().optional(),\n    company: zod__WEBPACK_IMPORTED_MODULE_5__.string().optional(),\n    location: zod__WEBPACK_IMPORTED_MODULE_5__.string().optional(),\n    value: zod__WEBPACK_IMPORTED_MODULE_5__.coerce.number().min(0).default(0).optional(),\n    status: zod__WEBPACK_IMPORTED_MODULE_5__[\"enum\"]([\n        'new',\n        'contacted',\n        'qualified',\n        'disqualified',\n        'converted'\n    ]).default('new').optional(),\n    source: zod__WEBPACK_IMPORTED_MODULE_5__.string().optional(),\n    date: zod__WEBPACK_IMPORTED_MODULE_5__.string().optional()\n});\nconst leadFiltersSchema = zod__WEBPACK_IMPORTED_MODULE_5__.object({\n    search: zod__WEBPACK_IMPORTED_MODULE_5__.string().nullable().optional().transform((v)=>v ?? ''),\n    status: zod__WEBPACK_IMPORTED_MODULE_5__[\"enum\"]([\n        'all',\n        'new',\n        'contacted',\n        'qualified',\n        'disqualified',\n        'converted'\n    ]).nullable().optional().transform((v)=>v ?? 'all'),\n    dateFrom: zod__WEBPACK_IMPORTED_MODULE_5__.string().nullable().optional().transform((v)=>v ?? undefined),\n    dateTo: zod__WEBPACK_IMPORTED_MODULE_5__.string().nullable().optional().transform((v)=>v ?? undefined),\n    sort: zod__WEBPACK_IMPORTED_MODULE_5__.string().nullable().optional().transform((v)=>v ?? 'date'),\n    direction: zod__WEBPACK_IMPORTED_MODULE_5__[\"enum\"]([\n        'asc',\n        'desc'\n    ]).nullable().optional().transform((v)=>v ?? 'desc'),\n    page: zod__WEBPACK_IMPORTED_MODULE_5__.coerce.number().min(0).nullable().optional().transform((v)=>v == null ? 0 : v),\n    pageSize: zod__WEBPACK_IMPORTED_MODULE_5__.coerce.number().min(1).max(100).nullable().optional().transform((v)=>v == null ? 10 : v)\n});\nasync function getServerClient() {\n    const cookieStore = await (0,next_headers__WEBPACK_IMPORTED_MODULE_2__.cookies)();\n    return (0,_supabase_ssr__WEBPACK_IMPORTED_MODULE_1__.createServerClient)(\"https://hewpwluinbwaizwqhmjc.supabase.co\", \"sb_publishable_F1bepvhJ6cGvjDNRfj_QfA_ZcNq0USi\", {\n        cookies: {\n            getAll () {\n                return cookieStore.getAll();\n            },\n            setAll (cookiesToSet) {\n                cookiesToSet.forEach(({ name, value, options })=>cookieStore.set(name, value, options));\n            }\n        }\n    });\n}\nasync function GET(request) {\n    try {\n        const supabase = await getServerClient();\n        let scope;\n        try {\n            scope = await (0,_server_auth_getUserAndScope__WEBPACK_IMPORTED_MODULE_4__.getUserAndScope)();\n        } catch (error) {\n            const message = error instanceof Error ? error.message : String(error);\n            if (message === 'Unauthorized') {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: 'Unauthorized'\n                }, {\n                    status: 401\n                });\n            }\n            throw error;\n        }\n        const { searchParams } = new URL(request.url);\n        const filters = leadFiltersSchema.parse({\n            search: searchParams.get('search'),\n            status: searchParams.get('status'),\n            dateFrom: searchParams.get('dateFrom'),\n            dateTo: searchParams.get('dateTo'),\n            sort: searchParams.get('sort'),\n            direction: searchParams.get('direction'),\n            page: searchParams.get('page'),\n            pageSize: searchParams.get('pageSize')\n        });\n        const repo = new _server_repositories_leads__WEBPACK_IMPORTED_MODULE_3__.LeadsRepository(supabase);\n        const result = await repo.list({\n            filters: {\n                search: filters.search || undefined,\n                status: filters.status,\n                dateFrom: filters.dateFrom,\n                dateTo: filters.dateTo\n            },\n            sort: filters.sort,\n            direction: filters.direction,\n            page: filters.page,\n            pageSize: filters.pageSize,\n            userId: scope.userId,\n            ownerIds: scope.allowedOwnerIds\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(result, {\n            headers: {\n                'Cache-Control': 'private, max-age=30, stale-while-revalidate=120'\n            }\n        });\n    } catch (error) {\n        if (error instanceof zod__WEBPACK_IMPORTED_MODULE_6__.ZodError) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: 'Validation failed',\n            details: error.errors\n        }, {\n            status: 400\n        });\n        const message = error instanceof Error ? error.message : String(error);\n        if (message.includes('leads_status_check')) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'Invalid lead status'\n            }, {\n                status: 400\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: 'Internal server error'\n        }, {\n            status: 500\n        });\n    }\n}\nasync function POST(request) {\n    try {\n        const supabase = await getServerClient();\n        const { data: { user } } = await supabase.auth.getUser();\n        if (!user) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: 'Unauthorized'\n        }, {\n            status: 401\n        });\n        const body = await request.json();\n        const validated = leadCreateSchema.parse(body);\n        const repo = new _server_repositories_leads__WEBPACK_IMPORTED_MODULE_3__.LeadsRepository(supabase);\n        // Status already validated as canonical; insert as provided or default to 'new'\n        const lead = await repo.create({\n            ...validated,\n            status: validated.status || 'new'\n        }, user.id);\n        // Log activity (best-effort)\n        __webpack_require__.e(/*! import() */ \"_rsc_src_app_api__lib_log-activity_ts\").then(__webpack_require__.bind(__webpack_require__, /*! @/app/api/_lib/log-activity */ \"(rsc)/./src/app/api/_lib/log-activity.ts\")).then(async ({ logActivity })=>{\n            await logActivity(supabase, user.id, {\n                type: 'lead',\n                description: `Lead created: ${lead.full_name}`,\n                entity: lead.email,\n                details: {\n                    id: lead.id\n                }\n            });\n        }).catch(()=>{});\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(lead, {\n            status: 201\n        });\n    } catch (error) {\n        if (error instanceof zod__WEBPACK_IMPORTED_MODULE_6__.ZodError) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'Validation failed',\n                details: error.errors\n            }, {\n                status: 400\n            });\n        }\n        const message = error instanceof Error ? error.message : String(error);\n        if (message.includes('leads_status_check')) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'Invalid lead status'\n            }, {\n                status: 400\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: 'Internal server error'\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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WUFBRTlELFFBQVE4RCxVQUFVOUQsTUFBTSxJQUFJO1FBQU0sR0FBRzBELEtBQUtPLEVBQUU7UUFDM0YsNkJBQTZCO1FBQzdCLGlOQUFxQyxDQUFDQyxJQUFJLENBQUMsT0FBTyxFQUFFQyxXQUFXLEVBQUU7WUFDaEUsTUFBTUEsWUFBWW5DLFVBQWlCMEIsS0FBS08sRUFBRSxFQUFFO2dCQUMzQ0csTUFBTTtnQkFDTkMsYUFBYSxDQUFDLGNBQWMsRUFBRSxLQUFjL0UsU0FBUyxFQUFFO2dCQUN2RGdGLFFBQVEsS0FBYzlFLEtBQUs7Z0JBQzNCNkQsU0FBUztvQkFBRVksSUFBSSxLQUFjQSxFQUFFO2dCQUFDO1lBQ2pDO1FBQ0QsR0FBR00sS0FBSyxDQUFDLEtBQU87UUFDaEIsT0FBTzVGLHFEQUFZQSxDQUFDMkQsSUFBSSxDQUFDeUIsTUFBTTtZQUFFL0QsUUFBUTtRQUFJO0lBQzlDLEVBQUUsT0FBT2tDLE9BQU87UUFDZixJQUFJQSxpQkFBaUJwRCx5Q0FBVSxFQUFFO1lBQ2hDLE9BQU9ILHFEQUFZQSxDQUFDMkQsSUFBSSxDQUFDO2dCQUFFSixPQUFPO2dCQUFxQm1CLFNBQVNuQixNQUFNb0IsTUFBTTtZQUFDLEdBQUc7Z0JBQUV0RCxRQUFRO1lBQUk7UUFDL0Y7UUFDQSxNQUFNbUMsVUFBVUQsaUJBQWlCRSxRQUFRRixNQUFNQyxPQUFPLEdBQUdFLE9BQU9IO1FBQ2hFLElBQUlDLFFBQVFvQixRQUFRLENBQUMsdUJBQXVCO1lBQzNDLE9BQU81RSxxREFBWUEsQ0FBQzJELElBQUksQ0FBQztnQkFBRUosT0FBTztZQUFzQixHQUFHO2dCQUFFbEMsUUFBUTtZQUFJO1FBQzFFO1FBQ0EsT0FBT3JCLHFEQUFZQSxDQUFDMkQsSUFBSSxDQUFDO1lBQUVKLE9BQU87UUFBd0IsR0FBRztZQUFFbEMsUUFBUTtRQUFJO0lBQzVFO0FBQ0QiLCJzb3VyY2VzIjpbIkQ6XFxEZWx0YSBJVlxcU29md2FyZXNcXGdsYXNzXFxzYW5kYm94XFxzaGFkY24tY3JtLWRhc2hib2FyZFxcc3JjXFxhcHBcXGFwaVxcbGVhZHNcXHJvdXRlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcidcbmltcG9ydCB7IGNyZWF0ZVNlcnZlckNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zc3InXG5pbXBvcnQgeyBjb29raWVzIH0gZnJvbSAnbmV4dC9oZWFkZXJzJ1xuaW1wb3J0IHsgeiB9IGZyb20gJ3pvZCdcbmltcG9ydCB7IExlYWRzUmVwb3NpdG9yeSB9IGZyb20gJ0Avc2VydmVyL3JlcG9zaXRvcmllcy9sZWFkcydcbmltcG9ydCB7IGdldFVzZXJBbmRTY29wZSB9IGZyb20gJ0Avc2VydmVyL2F1dGgvZ2V0VXNlckFuZFNjb3BlJ1xuXG5jb25zdCBsZWFkQ3JlYXRlU2NoZW1hID0gei5vYmplY3Qoe1xuXHRsZWFkX251bWJlcjogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuXHRmdWxsX25hbWU6IHouc3RyaW5nKCkubWluKDEsICdGdWxsIG5hbWUgaXMgcmVxdWlyZWQnKSxcblx0ZW1haWw6IHouc3RyaW5nKCkuZW1haWwoJ1ZhbGlkIGVtYWlsIGlzIHJlcXVpcmVkJyksXG5cdHBob25lOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG5cdGNvbXBhbnk6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcblx0bG9jYXRpb246IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcblx0dmFsdWU6IHouY29lcmNlLm51bWJlcigpLm1pbigwKS5kZWZhdWx0KDApLm9wdGlvbmFsKCksXG5cdHN0YXR1czogei5lbnVtKFsnbmV3JywnY29udGFjdGVkJywncXVhbGlmaWVkJywnZGlzcXVhbGlmaWVkJywnY29udmVydGVkJ10pLmRlZmF1bHQoJ25ldycpLm9wdGlvbmFsKCksXG5cdHNvdXJjZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuXHRkYXRlOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KVxuXG5jb25zdCBsZWFkRmlsdGVyc1NjaGVtYSA9IHoub2JqZWN0KHtcblx0c2VhcmNoOiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKS50cmFuc2Zvcm0odiA9PiB2ID8/ICcnKSxcblx0c3RhdHVzOiB6LmVudW0oWydhbGwnLCduZXcnLCdjb250YWN0ZWQnLCdxdWFsaWZpZWQnLCdkaXNxdWFsaWZpZWQnLCdjb252ZXJ0ZWQnXSkubnVsbGFibGUoKS5vcHRpb25hbCgpLnRyYW5zZm9ybSh2ID0+IHYgPz8gJ2FsbCcpLFxuXHRkYXRlRnJvbTogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCkudHJhbnNmb3JtKHYgPT4gdiA/PyB1bmRlZmluZWQpLFxuXHRkYXRlVG86IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLnRyYW5zZm9ybSh2ID0+IHYgPz8gdW5kZWZpbmVkKSxcblx0c29ydDogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCkudHJhbnNmb3JtKHYgPT4gdiA/PyAnZGF0ZScpLFxuXHRkaXJlY3Rpb246IHouZW51bShbJ2FzYycsJ2Rlc2MnXSkubnVsbGFibGUoKS5vcHRpb25hbCgpLnRyYW5zZm9ybSh2ID0+IHYgPz8gJ2Rlc2MnKSxcblx0cGFnZTogei5jb2VyY2UubnVtYmVyKCkubWluKDApLm51bGxhYmxlKCkub3B0aW9uYWwoKS50cmFuc2Zvcm0odiA9PiAodiA9PSBudWxsID8gMCA6IHYpKSxcblx0cGFnZVNpemU6IHouY29lcmNlLm51bWJlcigpLm1pbigxKS5tYXgoMTAwKS5udWxsYWJsZSgpLm9wdGlvbmFsKCkudHJhbnNmb3JtKHYgPT4gKHYgPT0gbnVsbCA/IDEwIDogdikpLFxufSlcblxuYXN5bmMgZnVuY3Rpb24gZ2V0U2VydmVyQ2xpZW50KCkge1xuXHRjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKVxuXHRyZXR1cm4gY3JlYXRlU2VydmVyQ2xpZW50KFxuXHRcdHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCEsXG5cdFx0cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkhLFxuXHRcdHtcblx0XHRcdGNvb2tpZXM6IHtcblx0XHRcdFx0Z2V0QWxsKCkge1xuXHRcdFx0XHRcdHJldHVybiBjb29raWVTdG9yZS5nZXRBbGwoKVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRzZXRBbGwoY29va2llc1RvU2V0KSB7XG5cdFx0XHRcdFx0Y29va2llc1RvU2V0LmZvckVhY2goKHsgbmFtZSwgdmFsdWUsIG9wdGlvbnMgfSkgPT4gY29va2llU3RvcmUuc2V0KG5hbWUsIHZhbHVlLCBvcHRpb25zKSlcblx0XHRcdFx0fSxcblx0XHRcdH0sXG5cdFx0fVxuXHQpXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcblx0dHJ5IHtcblx0XHRjb25zdCBzdXBhYmFzZSA9IGF3YWl0IGdldFNlcnZlckNsaWVudCgpXG5cdFx0bGV0IHNjb3BlXG5cdFx0dHJ5IHtcblx0XHRcdHNjb3BlID0gYXdhaXQgZ2V0VXNlckFuZFNjb3BlKClcblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0Y29uc3QgbWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKVxuXHRcdFx0aWYgKG1lc3NhZ2UgPT09ICdVbmF1dGhvcml6ZWQnKSB7XG5cdFx0XHRcdHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnVW5hdXRob3JpemVkJyB9LCB7IHN0YXR1czogNDAxIH0pXG5cdFx0XHR9XG5cdFx0XHR0aHJvdyBlcnJvclxuXHRcdH1cblx0XHRjb25zdCB7IHNlYXJjaFBhcmFtcyB9ID0gbmV3IFVSTChyZXF1ZXN0LnVybClcblx0XHRjb25zdCBmaWx0ZXJzID0gbGVhZEZpbHRlcnNTY2hlbWEucGFyc2Uoe1xuXHRcdFx0c2VhcmNoOiBzZWFyY2hQYXJhbXMuZ2V0KCdzZWFyY2gnKSxcblx0XHRcdHN0YXR1czogc2VhcmNoUGFyYW1zLmdldCgnc3RhdHVzJyksXG5cdFx0XHRkYXRlRnJvbTogc2VhcmNoUGFyYW1zLmdldCgnZGF0ZUZyb20nKSxcblx0XHRcdGRhdGVUbzogc2VhcmNoUGFyYW1zLmdldCgnZGF0ZVRvJyksXG5cdFx0XHRzb3J0OiBzZWFyY2hQYXJhbXMuZ2V0KCdzb3J0JyksXG5cdFx0XHRkaXJlY3Rpb246IHNlYXJjaFBhcmFtcy5nZXQoJ2RpcmVjdGlvbicpLFxuXHRcdFx0cGFnZTogc2VhcmNoUGFyYW1zLmdldCgncGFnZScpLFxuXHRcdFx0cGFnZVNpemU6IHNlYXJjaFBhcmFtcy5nZXQoJ3BhZ2VTaXplJyksXG5cdFx0fSlcblx0XHRjb25zdCByZXBvID0gbmV3IExlYWRzUmVwb3NpdG9yeShzdXBhYmFzZSlcblx0XHRjb25zdCByZXN1bHQgPSBhd2FpdCByZXBvLmxpc3Qoe1xuXHRcdFx0ZmlsdGVyczogeyBzZWFyY2g6IGZpbHRlcnMuc2VhcmNoIHx8IHVuZGVmaW5lZCwgc3RhdHVzOiBmaWx0ZXJzLnN0YXR1cyBhcyBhbnksIGRhdGVGcm9tOiBmaWx0ZXJzLmRhdGVGcm9tLCBkYXRlVG86IGZpbHRlcnMuZGF0ZVRvIH0sXG5cdFx0XHRzb3J0OiBmaWx0ZXJzLnNvcnQsXG5cdFx0XHRkaXJlY3Rpb246IGZpbHRlcnMuZGlyZWN0aW9uLFxuXHRcdFx0cGFnZTogZmlsdGVycy5wYWdlLFxuXHRcdFx0cGFnZVNpemU6IGZpbHRlcnMucGFnZVNpemUsXG5cdFx0XHR1c2VySWQ6IHNjb3BlLnVzZXJJZCxcblx0XHRcdG93bmVySWRzOiBzY29wZS5hbGxvd2VkT3duZXJJZHMsXG5cdFx0fSlcblx0XHRyZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24ocmVzdWx0LCB7IGhlYWRlcnM6IHsgJ0NhY2hlLUNvbnRyb2wnOiAncHJpdmF0ZSwgbWF4LWFnZT0zMCwgc3RhbGUtd2hpbGUtcmV2YWxpZGF0ZT0xMjAnIH0gfSlcblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRpZiAoZXJyb3IgaW5zdGFuY2VvZiB6LlpvZEVycm9yKSByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ1ZhbGlkYXRpb24gZmFpbGVkJywgZGV0YWlsczogZXJyb3IuZXJyb3JzIH0sIHsgc3RhdHVzOiA0MDAgfSlcblx0XHRjb25zdCBtZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpXG5cdFx0aWYgKG1lc3NhZ2UuaW5jbHVkZXMoJ2xlYWRzX3N0YXR1c19jaGVjaycpKSB7XG5cdFx0XHRyZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgbGVhZCBzdGF0dXMnIH0sIHsgc3RhdHVzOiA0MDAgfSlcblx0XHR9XG5cdFx0cmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InIH0sIHsgc3RhdHVzOiA1MDAgfSlcblx0fVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuXHR0cnkge1xuXHRcdGNvbnN0IHN1cGFiYXNlID0gYXdhaXQgZ2V0U2VydmVyQ2xpZW50KClcblx0XHRjb25zdCB7IGRhdGE6IHsgdXNlciB9IH0gPSBhd2FpdCBzdXBhYmFzZS5hdXRoLmdldFVzZXIoKVxuXHRcdGlmICghdXNlcikgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdVbmF1dGhvcml6ZWQnIH0sIHsgc3RhdHVzOiA0MDEgfSlcblx0XHRjb25zdCBib2R5ID0gYXdhaXQgcmVxdWVzdC5qc29uKClcblx0XHRjb25zdCB2YWxpZGF0ZWQgPSBsZWFkQ3JlYXRlU2NoZW1hLnBhcnNlKGJvZHkpXG5cdFx0Y29uc3QgcmVwbyA9IG5ldyBMZWFkc1JlcG9zaXRvcnkoc3VwYWJhc2UpXG5cdFx0Ly8gU3RhdHVzIGFscmVhZHkgdmFsaWRhdGVkIGFzIGNhbm9uaWNhbDsgaW5zZXJ0IGFzIHByb3ZpZGVkIG9yIGRlZmF1bHQgdG8gJ25ldydcblx0XHRjb25zdCBsZWFkID0gYXdhaXQgcmVwby5jcmVhdGUoeyAuLi52YWxpZGF0ZWQsIHN0YXR1czogdmFsaWRhdGVkLnN0YXR1cyB8fCAnbmV3JyB9LCB1c2VyLmlkKVxuXHRcdC8vIExvZyBhY3Rpdml0eSAoYmVzdC1lZmZvcnQpXG5cdFx0aW1wb3J0KCdAL2FwcC9hcGkvX2xpYi9sb2ctYWN0aXZpdHknKS50aGVuKGFzeW5jICh7IGxvZ0FjdGl2aXR5IH0pID0+IHtcblx0XHRcdGF3YWl0IGxvZ0FjdGl2aXR5KHN1cGFiYXNlIGFzIGFueSwgdXNlci5pZCwge1xuXHRcdFx0XHR0eXBlOiAnbGVhZCcsXG5cdFx0XHRcdGRlc2NyaXB0aW9uOiBgTGVhZCBjcmVhdGVkOiAkeyhsZWFkIGFzIGFueSkuZnVsbF9uYW1lfWAsXG5cdFx0XHRcdGVudGl0eTogKGxlYWQgYXMgYW55KS5lbWFpbCxcblx0XHRcdFx0ZGV0YWlsczogeyBpZDogKGxlYWQgYXMgYW55KS5pZCB9XG5cdFx0XHR9KVxuXHRcdH0pLmNhdGNoKCgpID0+IHt9KVxuXHRcdHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihsZWFkLCB7IHN0YXR1czogMjAxIH0pXG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0aWYgKGVycm9yIGluc3RhbmNlb2Ygei5ab2RFcnJvcikge1xuXHRcdFx0cmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdWYWxpZGF0aW9uIGZhaWxlZCcsIGRldGFpbHM6IGVycm9yLmVycm9ycyB9LCB7IHN0YXR1czogNDAwIH0pXG5cdFx0fVxuXHRcdGNvbnN0IG1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcilcblx0XHRpZiAobWVzc2FnZS5pbmNsdWRlcygnbGVhZHNfc3RhdHVzX2NoZWNrJykpIHtcblx0XHRcdHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnSW52YWxpZCBsZWFkIHN0YXR1cycgfSwgeyBzdGF0dXM6IDQwMCB9KVxuXHRcdH1cblx0XHRyZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSwgeyBzdGF0dXM6IDUwMCB9KVxuXHR9XG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiY3JlYXRlU2VydmVyQ2xpZW50IiwiY29va2llcyIsInoiLCJMZWFkc1JlcG9zaXRvcnkiLCJnZXRVc2VyQW5kU2NvcGUiLCJsZWFkQ3JlYXRlU2NoZW1hIiwib2JqZWN0IiwibGVhZF9udW1iZXIiLCJzdHJpbmciLCJvcHRpb25hbCIsImZ1bGxfbmFtZSIsIm1pbiIsImVtYWlsIiwicGhvbmUiLCJjb21wYW55IiwibG9jYXRpb24iLCJ2YWx1ZSIsImNvZXJjZSIsIm51bWJlciIsImRlZmF1bHQiLCJzdGF0dXMiLCJlbnVtIiwic291cmNlIiwiZGF0ZSIsImxlYWRGaWx0ZXJzU2NoZW1hIiwic2VhcmNoIiwibnVsbGFibGUiLCJ0cmFuc2Zvcm0iLCJ2IiwiZGF0ZUZyb20iLCJ1bmRlZmluZWQiLCJkYXRlVG8iLCJzb3J0IiwiZGlyZWN0aW9uIiwicGFnZSIsInBhZ2VTaXplIiwibWF4IiwiZ2V0U2VydmVyQ2xpZW50IiwiY29va2llU3RvcmUiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkiLCJnZXRBbGwiLCJzZXRBbGwiLCJjb29raWVzVG9TZXQiLCJmb3JFYWNoIiwibmFtZSIsIm9wdGlvbnMiLCJzZXQiLCJHRVQiLCJyZXF1ZXN0Iiwic3VwYWJhc2UiLCJzY29wZSIsImVycm9yIiwibWVzc2FnZSIsIkVycm9yIiwiU3RyaW5nIiwianNvbiIsInNlYXJjaFBhcmFtcyIsIlVSTCIsInVybCIsImZpbHRlcnMiLCJwYXJzZSIsImdldCIsInJlcG8iLCJyZXN1bHQiLCJsaXN0IiwidXNlcklkIiwib3duZXJJZHMiLCJhbGxvd2VkT3duZXJJZHMiLCJoZWFkZXJzIiwiWm9kRXJyb3IiLCJkZXRhaWxzIiwiZXJyb3JzIiwiaW5jbHVkZXMiLCJQT1NUIiwiZGF0YSIsInVzZXIiLCJhdXRoIiwiZ2V0VXNlciIsImJvZHkiLCJ2YWxpZGF0ZWQiLCJsZWFkIiwiY3JlYXRlIiwiaWQiLCJ0aGVuIiwibG9nQWN0aXZpdHkiLCJ0eXBlIiwiZGVzY3JpcHRpb24iLCJlbnRpdHkiLCJjYXRjaCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/leads/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/server/auth/getUserAndScope.ts":
/*!********************************************!*\
  !*** ./src/server/auth/getUserAndScope.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getUserAndScope: () => (/* binding */ getUserAndScope)\n/* harmony export */ });\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/.pnpm/next@15.2.2_@playwright+test@1.57.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/api/headers.js\");\n/* harmony import */ var _supabase_ssr__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @supabase/ssr */ \"@supabase/ssr\");\n/* harmony import */ var _supabase_ssr__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_supabase_ssr__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _server_config_flags__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/server/config/flags */ \"(rsc)/./src/server/config/flags.ts\");\n\n\n\nasync function getUserAndScope() {\n    const cookieStore = await (0,next_headers__WEBPACK_IMPORTED_MODULE_0__.cookies)();\n    const supabase = (0,_supabase_ssr__WEBPACK_IMPORTED_MODULE_1__.createServerClient)(\"https://hewpwluinbwaizwqhmjc.supabase.co\", \"sb_publishable_F1bepvhJ6cGvjDNRfj_QfA_ZcNq0USi\", {\n        cookies: {\n            getAll () {\n                return cookieStore.getAll();\n            },\n            setAll () {}\n        }\n    });\n    const { data: { user } } = await supabase.auth.getUser();\n    if (!user) throw new Error('Unauthorized');\n    // God via env flag list\n    if (_server_config_flags__WEBPACK_IMPORTED_MODULE_2__.flags.godUserIds.includes(user.id)) {\n        // For god users, use empty array to signal no owner filter (repos interpret [] as no filter)\n        return {\n            userId: user.id,\n            role: 'god',\n            teamId: null,\n            orgId: null,\n            allowedOwnerIds: []\n        };\n    }\n    // Fetch user role row if present\n    const { data: roleRow } = await supabase.from('user_roles').select('org_id, team_id, role').eq('user_id', user.id).maybeSingle();\n    const role = roleRow?.role || 'rep';\n    const teamId = roleRow?.team_id || null;\n    const orgId = roleRow?.org_id || null;\n    // Determine scope (KISS default)\n    let allowedOwnerIds;\n    switch(role){\n        case 'rep':\n            allowedOwnerIds = [\n                user.id\n            ];\n            break;\n        case 'lead':\n            // For now, team scope needs a team membership table; until then, default to own only\n            allowedOwnerIds = [\n                user.id\n            ];\n            break;\n        case 'manager':\n        case 'executive':\n            // Until org membership is modeled, default to own only; widen later in Phase 1 extensions\n            allowedOwnerIds = [\n                user.id\n            ];\n            break;\n        case 'god':\n            // No owner filter\n            allowedOwnerIds = [];\n            break;\n    }\n    return {\n        userId: user.id,\n        role,\n        teamId,\n        orgId,\n        allowedOwnerIds\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvc2VydmVyL2F1dGgvZ2V0VXNlckFuZFNjb3BlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXNDO0FBQ1k7QUFDTDtBQWF0QyxlQUFlRztJQUNyQixNQUFNQyxjQUFjLE1BQU1KLHFEQUFPQTtJQUNqQyxNQUFNSyxXQUFXSixpRUFBa0JBLENBQ2xDSywwQ0FBb0MsRUFDcENBLGdEQUF5QyxFQUN6QztRQUNDTixTQUFTO1lBQ1JVO2dCQUFXLE9BQU9OLFlBQVlNLE1BQU07WUFBRztZQUN2Q0MsV0FBMkM7UUFDNUM7SUFDRDtJQUVELE1BQU0sRUFBRUMsTUFBTSxFQUFFQyxJQUFJLEVBQUUsRUFBRSxHQUFHLE1BQU1SLFNBQVNTLElBQUksQ0FBQ0MsT0FBTztJQUN0RCxJQUFJLENBQUNGLE1BQU0sTUFBTSxJQUFJRyxNQUFNO0lBRXhCLHdCQUF3QjtJQUN4QixJQUFJZCx1REFBS0EsQ0FBQ2UsVUFBVSxDQUFDQyxRQUFRLENBQUNMLEtBQUtNLEVBQUUsR0FBRztRQUNwQyw2RkFBNkY7UUFDN0YsT0FBTztZQUFFQyxRQUFRUCxLQUFLTSxFQUFFO1lBQUVFLE1BQU07WUFBT0MsUUFBUTtZQUFNQyxPQUFPO1lBQU1DLGlCQUFpQixFQUFFO1FBQUM7SUFDMUY7SUFFSCxpQ0FBaUM7SUFDakMsTUFBTSxFQUFFWixNQUFNYSxPQUFPLEVBQUUsR0FBRyxNQUFNcEIsU0FDOUJxQixJQUFJLENBQUMsY0FDTEMsTUFBTSxDQUFDLHlCQUNQQyxFQUFFLENBQUMsV0FBV2YsS0FBS00sRUFBRSxFQUNyQlUsV0FBVztJQUViLE1BQU1SLE9BQWlCLFNBQVVBLFFBQXFCO0lBQ3RELE1BQU1DLFNBQVNHLFNBQVNLLFdBQVc7SUFDbkMsTUFBTVAsUUFBUUUsU0FBU00sVUFBVTtJQUVqQyxpQ0FBaUM7SUFDOUIsSUFBSVA7SUFDUCxPQUFRSDtRQUNQLEtBQUs7WUFDSkcsa0JBQWtCO2dCQUFDWCxLQUFLTSxFQUFFO2FBQUM7WUFDM0I7UUFDRCxLQUFLO1lBQ0oscUZBQXFGO1lBQ3JGSyxrQkFBa0I7Z0JBQUNYLEtBQUtNLEVBQUU7YUFBQztZQUMzQjtRQUNELEtBQUs7UUFDTCxLQUFLO1lBQ0osMEZBQTBGO1lBQzFGSyxrQkFBa0I7Z0JBQUNYLEtBQUtNLEVBQUU7YUFBQztZQUMzQjtRQUNLLEtBQUs7WUFDRCxrQkFBa0I7WUFDbEJLLGtCQUFrQixFQUFFO1lBQ3BCO0lBQ1g7SUFFQSxPQUFPO1FBQUVKLFFBQVFQLEtBQUtNLEVBQUU7UUFBRUU7UUFBTUM7UUFBUUM7UUFBT0M7SUFBZ0I7QUFDaEUiLCJzb3VyY2VzIjpbIkQ6XFxEZWx0YSBJVlxcU29md2FyZXNcXGdsYXNzXFxzYW5kYm94XFxzaGFkY24tY3JtLWRhc2hib2FyZFxcc3JjXFxzZXJ2ZXJcXGF1dGhcXGdldFVzZXJBbmRTY29wZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjb29raWVzIH0gZnJvbSAnbmV4dC9oZWFkZXJzJ1xyXG5pbXBvcnQgeyBjcmVhdGVTZXJ2ZXJDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3NyJ1xyXG5pbXBvcnQgeyBmbGFncyB9IGZyb20gJ0Avc2VydmVyL2NvbmZpZy9mbGFncydcclxuXHJcbmV4cG9ydCB0eXBlIFVzZXJSb2xlID0gJ3JlcCcgfCAnbGVhZCcgfCAnbWFuYWdlcicgfCAnZXhlY3V0aXZlJyB8ICdnb2QnXHJcblxyXG5leHBvcnQgdHlwZSBVc2VyU2NvcGUgPSB7XHJcbiAgICB1c2VySWQ6IHN0cmluZ1xyXG4gICAgcm9sZTogVXNlclJvbGVcclxuICAgIHRlYW1JZDogc3RyaW5nIHwgbnVsbFxyXG4gICAgb3JnSWQ6IHN0cmluZyB8IG51bGxcclxuICAgIC8vIEVtcHR5IGFycmF5ID0+IG5vIG93bmVyIGZpbHRlciAoZ29kIHNjb3BlKS4gTm9uLWVtcHR5ID0+IHJlc3RyaWN0IHRvIHRoZXNlIG93bmVycy5cclxuICAgIGFsbG93ZWRPd25lcklkczogc3RyaW5nW11cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFVzZXJBbmRTY29wZSgpOiBQcm9taXNlPFVzZXJTY29wZT4ge1xyXG5cdGNvbnN0IGNvb2tpZVN0b3JlID0gYXdhaXQgY29va2llcygpXHJcblx0Y29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVTZXJ2ZXJDbGllbnQoXHJcblx0XHRwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwhLFxyXG5cdFx0cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkhLFxyXG5cdFx0e1xyXG5cdFx0XHRjb29raWVzOiB7XHJcblx0XHRcdFx0Z2V0QWxsKCkgeyByZXR1cm4gY29va2llU3RvcmUuZ2V0QWxsKCkgfSxcclxuXHRcdFx0XHRzZXRBbGwoKSB7IC8qIG5vLW9wIGZvciBzZXJ2ZXIgcmVzb2x2ZXIgKi8gfSxcclxuXHRcdFx0fSxcclxuXHRcdH1cclxuXHQpXHJcblx0Y29uc3QgeyBkYXRhOiB7IHVzZXIgfSB9ID0gYXdhaXQgc3VwYWJhc2UuYXV0aC5nZXRVc2VyKClcclxuXHRpZiAoIXVzZXIpIHRocm93IG5ldyBFcnJvcignVW5hdXRob3JpemVkJylcclxuXHJcbiAgICAvLyBHb2QgdmlhIGVudiBmbGFnIGxpc3RcclxuICAgIGlmIChmbGFncy5nb2RVc2VySWRzLmluY2x1ZGVzKHVzZXIuaWQpKSB7XHJcbiAgICAgICAgLy8gRm9yIGdvZCB1c2VycywgdXNlIGVtcHR5IGFycmF5IHRvIHNpZ25hbCBubyBvd25lciBmaWx0ZXIgKHJlcG9zIGludGVycHJldCBbXSBhcyBubyBmaWx0ZXIpXHJcbiAgICAgICAgcmV0dXJuIHsgdXNlcklkOiB1c2VyLmlkLCByb2xlOiAnZ29kJywgdGVhbUlkOiBudWxsLCBvcmdJZDogbnVsbCwgYWxsb3dlZE93bmVySWRzOiBbXSB9XHJcbiAgICB9XHJcblxyXG5cdC8vIEZldGNoIHVzZXIgcm9sZSByb3cgaWYgcHJlc2VudFxyXG5cdGNvbnN0IHsgZGF0YTogcm9sZVJvdyB9ID0gYXdhaXQgc3VwYWJhc2VcclxuXHRcdC5mcm9tKCd1c2VyX3JvbGVzJylcclxuXHRcdC5zZWxlY3QoJ29yZ19pZCwgdGVhbV9pZCwgcm9sZScpXHJcblx0XHQuZXEoJ3VzZXJfaWQnLCB1c2VyLmlkKVxyXG5cdFx0Lm1heWJlU2luZ2xlKClcclxuXHJcblx0Y29uc3Qgcm9sZTogVXNlclJvbGUgPSAocm9sZVJvdz8ucm9sZSBhcyBVc2VyUm9sZSkgfHwgJ3JlcCdcclxuXHRjb25zdCB0ZWFtSWQgPSByb2xlUm93Py50ZWFtX2lkIHx8IG51bGxcclxuXHRjb25zdCBvcmdJZCA9IHJvbGVSb3c/Lm9yZ19pZCB8fCBudWxsXHJcblxyXG5cdC8vIERldGVybWluZSBzY29wZSAoS0lTUyBkZWZhdWx0KVxyXG4gICAgbGV0IGFsbG93ZWRPd25lcklkczogc3RyaW5nW11cclxuXHRzd2l0Y2ggKHJvbGUpIHtcclxuXHRcdGNhc2UgJ3JlcCc6XHJcblx0XHRcdGFsbG93ZWRPd25lcklkcyA9IFt1c2VyLmlkXVxyXG5cdFx0XHRicmVha1xyXG5cdFx0Y2FzZSAnbGVhZCc6XHJcblx0XHRcdC8vIEZvciBub3csIHRlYW0gc2NvcGUgbmVlZHMgYSB0ZWFtIG1lbWJlcnNoaXAgdGFibGU7IHVudGlsIHRoZW4sIGRlZmF1bHQgdG8gb3duIG9ubHlcclxuXHRcdFx0YWxsb3dlZE93bmVySWRzID0gW3VzZXIuaWRdXHJcblx0XHRcdGJyZWFrXHJcblx0XHRjYXNlICdtYW5hZ2VyJzpcclxuXHRcdGNhc2UgJ2V4ZWN1dGl2ZSc6XHJcblx0XHRcdC8vIFVudGlsIG9yZyBtZW1iZXJzaGlwIGlzIG1vZGVsZWQsIGRlZmF1bHQgdG8gb3duIG9ubHk7IHdpZGVuIGxhdGVyIGluIFBoYXNlIDEgZXh0ZW5zaW9uc1xyXG5cdFx0XHRhbGxvd2VkT3duZXJJZHMgPSBbdXNlci5pZF1cclxuXHRcdFx0YnJlYWtcclxuICAgICAgICBjYXNlICdnb2QnOlxyXG4gICAgICAgICAgICAvLyBObyBvd25lciBmaWx0ZXJcclxuICAgICAgICAgICAgYWxsb3dlZE93bmVySWRzID0gW11cclxuICAgICAgICAgICAgYnJlYWtcclxuXHR9XHJcblxyXG5cdHJldHVybiB7IHVzZXJJZDogdXNlci5pZCwgcm9sZSwgdGVhbUlkLCBvcmdJZCwgYWxsb3dlZE93bmVySWRzIH1cclxufVxyXG4iXSwibmFtZXMiOlsiY29va2llcyIsImNyZWF0ZVNlcnZlckNsaWVudCIsImZsYWdzIiwiZ2V0VXNlckFuZFNjb3BlIiwiY29va2llU3RvcmUiLCJzdXBhYmFzZSIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSIsImdldEFsbCIsInNldEFsbCIsImRhdGEiLCJ1c2VyIiwiYXV0aCIsImdldFVzZXIiLCJFcnJvciIsImdvZFVzZXJJZHMiLCJpbmNsdWRlcyIsImlkIiwidXNlcklkIiwicm9sZSIsInRlYW1JZCIsIm9yZ0lkIiwiYWxsb3dlZE93bmVySWRzIiwicm9sZVJvdyIsImZyb20iLCJzZWxlY3QiLCJlcSIsIm1heWJlU2luZ2xlIiwidGVhbV9pZCIsIm9yZ19pZCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/server/auth/getUserAndScope.ts\n");

/***/ }),

/***/ "(rsc)/./src/server/config/flags.ts":
/*!************************************!*\
  !*** ./src/server/config/flags.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   flags: () => (/* binding */ flags)\n/* harmony export */ });\nfunction readBoolean(name, defaultValue) {\n    const v = process.env[name];\n    if (v === undefined || v === null || v === '') return defaultValue;\n    return [\n        '1',\n        'true',\n        'yes',\n        'on'\n    ].includes(String(v).toLowerCase());\n}\nfunction readNumber(name, defaultValue) {\n    const v = process.env[name];\n    if (!v) return defaultValue;\n    const n = Number(v);\n    return Number.isFinite(n) ? n : defaultValue;\n}\nfunction readMode(name, defaultValue) {\n    const v = (process.env[name] || '').toLowerCase();\n    if (v === 'off' || v === 'log_only' || v === 'enforce') return v;\n    return defaultValue;\n}\nconst flags = {\n    lifecycleEnforcement: readMode('LIFECYCLE_ENFORCEMENT_MODE', 'off'),\n    calendarIntegrationEnabled: readBoolean('CALENDAR_INTEGRATION_ENABLED', false),\n    allowInvoiceDraft: readBoolean('ALLOW_INVOICE_DRAFT', true),\n    notificationsThrottleMs: readNumber('NOTIFICATIONS_THROTTLE_MS', 5 * 60 * 1000),\n    isProduction: \"development\" === 'production',\n    isDevelopment: \"development\" !== 'production',\n    godUserIds: (process.env.GOD_USER_IDS || '').split(',').map((s)=>s.trim()).filter(Boolean)\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvc2VydmVyL2NvbmZpZy9mbGFncy50cyIsIm1hcHBpbmdzIjoiOzs7O0FBRUEsU0FBU0EsWUFBWUMsSUFBWSxFQUFFQyxZQUFxQjtJQUN2RCxNQUFNQyxJQUFJQyxRQUFRQyxHQUFHLENBQUNKLEtBQUs7SUFDM0IsSUFBSUUsTUFBTUcsYUFBYUgsTUFBTSxRQUFRQSxNQUFNLElBQUksT0FBT0Q7SUFDdEQsT0FBTztRQUFDO1FBQUs7UUFBUTtRQUFPO0tBQUssQ0FBQ0ssUUFBUSxDQUFDQyxPQUFPTCxHQUFHTSxXQUFXO0FBQ2pFO0FBRUEsU0FBU0MsV0FBV1QsSUFBWSxFQUFFQyxZQUFvQjtJQUNyRCxNQUFNQyxJQUFJQyxRQUFRQyxHQUFHLENBQUNKLEtBQUs7SUFDM0IsSUFBSSxDQUFDRSxHQUFHLE9BQU9EO0lBQ2YsTUFBTVMsSUFBSUMsT0FBT1Q7SUFDakIsT0FBT1MsT0FBT0MsUUFBUSxDQUFDRixLQUFLQSxJQUFJVDtBQUNqQztBQUVBLFNBQVNZLFNBQVNiLElBQVksRUFBRUMsWUFBc0M7SUFDckUsTUFBTUMsSUFBSSxDQUFDQyxRQUFRQyxHQUFHLENBQUNKLEtBQUssSUFBSSxFQUFDLEVBQUdRLFdBQVc7SUFDL0MsSUFBSU4sTUFBTSxTQUFTQSxNQUFNLGNBQWNBLE1BQU0sV0FBVyxPQUFPQTtJQUMvRCxPQUFPRDtBQUNSO0FBRU8sTUFBTWEsUUFBUTtJQUNwQkMsc0JBQXNCRixTQUFTLDhCQUE4QjtJQUM3REcsNEJBQTRCakIsWUFBWSxnQ0FBZ0M7SUFDeEVrQixtQkFBbUJsQixZQUFZLHVCQUF1QjtJQUN0RG1CLHlCQUF5QlQsV0FBVyw2QkFBNkIsSUFBSSxLQUFLO0lBQzFFVSxjQUFjaEIsa0JBQXlCO0lBQ3ZDaUIsZUFBZWpCLGtCQUF5QjtJQUN4Q2tCLFlBQVksQ0FBQ2xCLFFBQVFDLEdBQUcsQ0FBQ2tCLFlBQVksSUFBSSxFQUFDLEVBQUdDLEtBQUssQ0FBQyxLQUFLQyxHQUFHLENBQUNDLENBQUFBLElBQUtBLEVBQUVDLElBQUksSUFBSUMsTUFBTSxDQUFDQztBQUNuRixFQUFDIiwic291cmNlcyI6WyJEOlxcRGVsdGEgSVZcXFNvZndhcmVzXFxnbGFzc1xcc2FuZGJveFxcc2hhZGNuLWNybS1kYXNoYm9hcmRcXHNyY1xcc2VydmVyXFxjb25maWdcXGZsYWdzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB0eXBlIExpZmVjeWNsZUVuZm9yY2VtZW50TW9kZSA9ICdvZmYnIHwgJ2xvZ19vbmx5JyB8ICdlbmZvcmNlJ1xyXG5cclxuZnVuY3Rpb24gcmVhZEJvb2xlYW4obmFtZTogc3RyaW5nLCBkZWZhdWx0VmFsdWU6IGJvb2xlYW4pOiBib29sZWFuIHtcclxuXHRjb25zdCB2ID0gcHJvY2Vzcy5lbnZbbmFtZV1cclxuXHRpZiAodiA9PT0gdW5kZWZpbmVkIHx8IHYgPT09IG51bGwgfHwgdiA9PT0gJycpIHJldHVybiBkZWZhdWx0VmFsdWVcclxuXHRyZXR1cm4gWycxJywgJ3RydWUnLCAneWVzJywgJ29uJ10uaW5jbHVkZXMoU3RyaW5nKHYpLnRvTG93ZXJDYXNlKCkpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlYWROdW1iZXIobmFtZTogc3RyaW5nLCBkZWZhdWx0VmFsdWU6IG51bWJlcik6IG51bWJlciB7XHJcblx0Y29uc3QgdiA9IHByb2Nlc3MuZW52W25hbWVdXHJcblx0aWYgKCF2KSByZXR1cm4gZGVmYXVsdFZhbHVlXHJcblx0Y29uc3QgbiA9IE51bWJlcih2KVxyXG5cdHJldHVybiBOdW1iZXIuaXNGaW5pdGUobikgPyBuIDogZGVmYXVsdFZhbHVlXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlYWRNb2RlKG5hbWU6IHN0cmluZywgZGVmYXVsdFZhbHVlOiBMaWZlY3ljbGVFbmZvcmNlbWVudE1vZGUpOiBMaWZlY3ljbGVFbmZvcmNlbWVudE1vZGUge1xyXG5cdGNvbnN0IHYgPSAocHJvY2Vzcy5lbnZbbmFtZV0gfHwgJycpLnRvTG93ZXJDYXNlKClcclxuXHRpZiAodiA9PT0gJ29mZicgfHwgdiA9PT0gJ2xvZ19vbmx5JyB8fCB2ID09PSAnZW5mb3JjZScpIHJldHVybiB2XHJcblx0cmV0dXJuIGRlZmF1bHRWYWx1ZVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgZmxhZ3MgPSB7XHJcblx0bGlmZWN5Y2xlRW5mb3JjZW1lbnQ6IHJlYWRNb2RlKCdMSUZFQ1lDTEVfRU5GT1JDRU1FTlRfTU9ERScsICdvZmYnKSBhcyBMaWZlY3ljbGVFbmZvcmNlbWVudE1vZGUsXHJcblx0Y2FsZW5kYXJJbnRlZ3JhdGlvbkVuYWJsZWQ6IHJlYWRCb29sZWFuKCdDQUxFTkRBUl9JTlRFR1JBVElPTl9FTkFCTEVEJywgZmFsc2UpLFxyXG5cdGFsbG93SW52b2ljZURyYWZ0OiByZWFkQm9vbGVhbignQUxMT1dfSU5WT0lDRV9EUkFGVCcsIHRydWUpLFxyXG5cdG5vdGlmaWNhdGlvbnNUaHJvdHRsZU1zOiByZWFkTnVtYmVyKCdOT1RJRklDQVRJT05TX1RIUk9UVExFX01TJywgNSAqIDYwICogMTAwMCksXHJcblx0aXNQcm9kdWN0aW9uOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nLFxyXG5cdGlzRGV2ZWxvcG1lbnQ6IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicsXHJcblx0Z29kVXNlcklkczogKHByb2Nlc3MuZW52LkdPRF9VU0VSX0lEUyB8fCAnJykuc3BsaXQoJywnKS5tYXAocyA9PiBzLnRyaW0oKSkuZmlsdGVyKEJvb2xlYW4pLFxyXG59XHJcbiJdLCJuYW1lcyI6WyJyZWFkQm9vbGVhbiIsIm5hbWUiLCJkZWZhdWx0VmFsdWUiLCJ2IiwicHJvY2VzcyIsImVudiIsInVuZGVmaW5lZCIsImluY2x1ZGVzIiwiU3RyaW5nIiwidG9Mb3dlckNhc2UiLCJyZWFkTnVtYmVyIiwibiIsIk51bWJlciIsImlzRmluaXRlIiwicmVhZE1vZGUiLCJmbGFncyIsImxpZmVjeWNsZUVuZm9yY2VtZW50IiwiY2FsZW5kYXJJbnRlZ3JhdGlvbkVuYWJsZWQiLCJhbGxvd0ludm9pY2VEcmFmdCIsIm5vdGlmaWNhdGlvbnNUaHJvdHRsZU1zIiwiaXNQcm9kdWN0aW9uIiwiaXNEZXZlbG9wbWVudCIsImdvZFVzZXJJZHMiLCJHT0RfVVNFUl9JRFMiLCJzcGxpdCIsIm1hcCIsInMiLCJ0cmltIiwiZmlsdGVyIiwiQm9vbGVhbiJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/server/config/flags.ts\n");

/***/ }),

/***/ "(rsc)/./src/server/repositories/leads.ts":
/*!******************************************!*\
  !*** ./src/server/repositories/leads.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LeadsRepository: () => (/* binding */ LeadsRepository),\n/* harmony export */   leadsRepository: () => (/* binding */ leadsRepository)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"@supabase/supabase-js\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__);\n\nconst supabaseUrl = \"https://hewpwluinbwaizwqhmjc.supabase.co\";\nconst supabaseAnonKey = \"sb_publishable_F1bepvhJ6cGvjDNRfj_QfA_ZcNq0USi\";\nconst defaultClient = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseAnonKey);\nclass LeadsRepository {\n    constructor(client){\n        this.client = client || defaultClient;\n    }\n    setClient(client) {\n        this.client = client;\n    }\n    async list(options) {\n        const { filters = {}, sort = 'date', direction = 'desc', page = 0, pageSize = 10, userId, ownerIds } = options;\n        // Determine effective owner scope: undefined -> [userId]; [] -> god (no filter); non-empty -> provided\n        const effectiveOwnerIds = ownerIds === undefined ? [\n            userId\n        ] : ownerIds;\n        let query = this.client.from('leads').select('*', {\n            count: 'estimated'\n        }).is('deleted_at', null);\n        // owner filter applied later based on effectiveOwnerIds\n        if (filters.search) {\n            query = query.or(`full_name.ilike.%${filters.search}%,email.ilike.%${filters.search}%,company.ilike.%${filters.search}%,lead_number.ilike.%${filters.search}%`);\n        }\n        if (filters.status && filters.status !== 'all') {\n            query = query.eq('status', filters.status);\n        }\n        if (filters.dateFrom) query = query.gte('date', filters.dateFrom);\n        if (filters.dateTo) query = query.lte('date', filters.dateTo);\n        query = query.order(sort, {\n            ascending: direction === 'asc'\n        });\n        const from = page * pageSize;\n        const to = from + pageSize - 1;\n        query = query.range(from, to);\n        // Apply owner filter conditionally at the end to avoid TypeScript confusion above\n        if (effectiveOwnerIds && effectiveOwnerIds.length > 0) {\n            query = query.in('owner_id', effectiveOwnerIds);\n        }\n        const { data, error, count } = await query;\n        if (error) throw new Error(`Failed to fetch leads: ${error.message}`);\n        return {\n            data: data || [],\n            count: count || 0,\n            page,\n            pageSize,\n            totalPages: Math.ceil((count || 0) / pageSize)\n        };\n    }\n    async getById(id, userId, ownerIds) {\n        const effectiveOwnerIds = ownerIds === undefined ? [\n            userId\n        ] : ownerIds;\n        let query = this.client.from('leads').select('*').eq('id', id).is('deleted_at', null).limit(1);\n        if (effectiveOwnerIds && effectiveOwnerIds.length > 0) {\n            query = query.in('owner_id', effectiveOwnerIds);\n        }\n        const { data, error } = await query.single();\n        if (error) {\n            if (error.code === 'PGRST116') return null;\n            throw new Error(`Failed to fetch lead: ${error.message}`);\n        }\n        return data;\n    }\n    async create(lead, userId) {\n        const { data, error } = await this.client.from('leads').insert({\n            ...lead,\n            owner_id: userId,\n            lead_number: lead.lead_number || `LEAD-${Date.now()}`,\n            date: lead.date || new Date().toISOString()\n        }).select().single();\n        if (error) throw new Error(`Failed to create lead: ${error.message}`);\n        return data;\n    }\n    async update(id, updates, userId, ownerIds) {\n        const effectiveOwnerIds = ownerIds === undefined ? [\n            userId\n        ] : ownerIds;\n        let query = this.client.from('leads').update(updates).eq('id', id).is('deleted_at', null);\n        if (effectiveOwnerIds && effectiveOwnerIds.length > 0) {\n            query = query.in('owner_id', effectiveOwnerIds);\n        }\n        const { data, error } = await query.select().single();\n        if (error) throw new Error(`Failed to update lead: ${error.message}`);\n        return data;\n    }\n    async delete(id, userId, ownerIds) {\n        const effectiveOwnerIds = ownerIds === undefined ? [\n            userId\n        ] : ownerIds;\n        let query = this.client.from('leads').update({\n            deleted_at: new Date().toISOString()\n        }).eq('id', id).is('deleted_at', null);\n        if (effectiveOwnerIds && effectiveOwnerIds.length > 0) {\n            query = query.in('owner_id', effectiveOwnerIds);\n        }\n        const { error } = await query;\n        if (error) throw new Error(`Failed to delete lead: ${error.message}`);\n    }\n}\nconst leadsRepository = new LeadsRepository();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNUdkIsRUFBRSxDQUFDLGNBQWM7UUFFbkIsSUFBSU4scUJBQXFCQSxrQkFBa0JtQixNQUFNLEdBQUcsR0FBRztZQUN0RGpCLFFBQVFBLE1BQU1rQixFQUFFLENBQUMsWUFBWXBCO1FBQzlCO1FBRUEsTUFBTSxFQUFFcUIsSUFBSSxFQUFFQyxLQUFLLEVBQUUsR0FBRyxNQUFNcEIsTUFBTUUsTUFBTSxHQUFHMkIsTUFBTTtRQUNuRCxJQUFJVCxPQUFPLE1BQU0sSUFBSUMsTUFBTSxDQUFDLHVCQUF1QixFQUFFRCxNQUFNRSxPQUFPLEVBQUU7UUFDcEUsT0FBT0g7SUFDUjtJQUVBLE1BQU11QixPQUFPZixFQUFVLEVBQUUvQixNQUFjLEVBQUVDLFFBQW1CLEVBQWlCO1FBQzVFLE1BQU1DLG9CQUFvQkQsYUFBYUUsWUFBWTtZQUFDSDtTQUFPLEdBQUdDO1FBRTlELElBQUlHLFFBQVEsSUFBSSxDQUFDYixNQUFNLENBQ3JCYyxJQUFJLENBQUMsU0FDTHVDLE1BQU0sQ0FBQztZQUFFRyxZQUFZLElBQUlQLE9BQU9HLFdBQVc7UUFBRyxHQUM5Qy9CLEVBQUUsQ0FBQyxNQUFNbUIsSUFDVHZCLEVBQUUsQ0FBQyxjQUFjO1FBRW5CLElBQUlOLHFCQUFxQkEsa0JBQWtCbUIsTUFBTSxHQUFHLEdBQUc7WUFDdERqQixRQUFRQSxNQUFNa0IsRUFBRSxDQUFDLFlBQVlwQjtRQUM5QjtRQUVBLE1BQU0sRUFBRXNCLEtBQUssRUFBRSxHQUFHLE1BQU1wQjtRQUN4QixJQUFJb0IsT0FBTyxNQUFNLElBQUlDLE1BQU0sQ0FBQyx1QkFBdUIsRUFBRUQsTUFBTUUsT0FBTyxFQUFFO0lBQ3JFO0FBQ0Q7QUFFTyxNQUFNc0Isa0JBQWtCLElBQUkzRCxrQkFBaUIiLCJzb3VyY2VzIjpbIkQ6XFxEZWx0YSBJVlxcU29md2FyZXNcXGdsYXNzXFxzYW5kYm94XFxzaGFkY24tY3JtLWRhc2hib2FyZFxcc3JjXFxzZXJ2ZXJcXHJlcG9zaXRvcmllc1xcbGVhZHMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJ1xuXG5jb25zdCBzdXBhYmFzZVVybCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCFcbmNvbnN0IHN1cGFiYXNlQW5vbktleSA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIVxuY29uc3QgZGVmYXVsdENsaWVudCA9IGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VBbm9uS2V5KVxuXG50eXBlIFN1cGFiYXNlQ2xpZW50QW55ID0gdHlwZW9mIGRlZmF1bHRDbGllbnRcblxudHlwZSBMZWFkID0gYW55XG5cbnR5cGUgTGVhZEluc2VydCA9IGFueVxuXG50eXBlIExlYWRVcGRhdGUgPSBhbnlcblxudHlwZSBMZWFkU3RhdHVzID0gJ25ldycgfCAnY29udGFjdGVkJyB8ICdxdWFsaWZpZWQnIHwgJ2Rpc3F1YWxpZmllZCcgfCAnY29udmVydGVkJ1xuXG5leHBvcnQgaW50ZXJmYWNlIExlYWRGaWx0ZXJzIHtcblx0c2VhcmNoPzogc3RyaW5nXG5cdHN0YXR1cz86ICdhbGwnIHwgTGVhZFN0YXR1c1xuXHRkYXRlRnJvbT86IHN0cmluZ1xuXHRkYXRlVG8/OiBzdHJpbmdcbn1cblxuZXhwb3J0IGludGVyZmFjZSBMZWFkTGlzdE9wdGlvbnMge1xuXHRmaWx0ZXJzPzogTGVhZEZpbHRlcnNcblx0c29ydD86IHN0cmluZ1xuXHRkaXJlY3Rpb24/OiAnYXNjJyB8ICdkZXNjJ1xuXHRwYWdlPzogbnVtYmVyXG5cdHBhZ2VTaXplPzogbnVtYmVyXG5cdHVzZXJJZDogc3RyaW5nXG5cdG93bmVySWRzPzogc3RyaW5nW10gLy8gT3B0aW9uYWwgc2NvcGUtYXdhcmUgb3duZXIgbGlzdCAoZGVmYXVsdHMgdG8gW3VzZXJJZF0pLiBJZiBlbXB0eSBhcnJheSwgdHJlYXQgYXMgbm8gb3duZXIgZmlsdGVyIChnb2Qgc2NvcGUpXG59XG5cbmV4cG9ydCBjbGFzcyBMZWFkc1JlcG9zaXRvcnkge1xuXHRwcml2YXRlIGNsaWVudDogU3VwYWJhc2VDbGllbnRBbnlcblxuXHRjb25zdHJ1Y3RvcihjbGllbnQ/OiBTdXBhYmFzZUNsaWVudEFueSkge1xuXHRcdHRoaXMuY2xpZW50ID0gY2xpZW50IHx8IGRlZmF1bHRDbGllbnRcblx0fVxuXG5cdHNldENsaWVudChjbGllbnQ6IFN1cGFiYXNlQ2xpZW50QW55KSB7XG5cdFx0dGhpcy5jbGllbnQgPSBjbGllbnRcblx0fVxuXG5cdGFzeW5jIGxpc3Qob3B0aW9uczogTGVhZExpc3RPcHRpb25zKSB7XG5cdFx0Y29uc3QgeyBmaWx0ZXJzID0ge30sIHNvcnQgPSAnZGF0ZScsIGRpcmVjdGlvbiA9ICdkZXNjJywgcGFnZSA9IDAsIHBhZ2VTaXplID0gMTAsIHVzZXJJZCwgb3duZXJJZHMgfSA9IG9wdGlvbnNcblx0XHRcblx0XHQvLyBEZXRlcm1pbmUgZWZmZWN0aXZlIG93bmVyIHNjb3BlOiB1bmRlZmluZWQgLT4gW3VzZXJJZF07IFtdIC0+IGdvZCAobm8gZmlsdGVyKTsgbm9uLWVtcHR5IC0+IHByb3ZpZGVkXG5cdFx0Y29uc3QgZWZmZWN0aXZlT3duZXJJZHMgPSBvd25lcklkcyA9PT0gdW5kZWZpbmVkID8gW3VzZXJJZF0gOiBvd25lcklkc1xuXG5cdFx0bGV0IHF1ZXJ5ID0gdGhpcy5jbGllbnRcblx0XHRcdC5mcm9tKCdsZWFkcycpXG5cdFx0XHQuc2VsZWN0KCcqJywgeyBjb3VudDogJ2VzdGltYXRlZCcgfSlcblx0XHRcdC5pcygnZGVsZXRlZF9hdCcsIG51bGwpXG5cdFx0Ly8gb3duZXIgZmlsdGVyIGFwcGxpZWQgbGF0ZXIgYmFzZWQgb24gZWZmZWN0aXZlT3duZXJJZHNcblxuXHRcdGlmIChmaWx0ZXJzLnNlYXJjaCkge1xuXHRcdFx0cXVlcnkgPSBxdWVyeS5vcihgZnVsbF9uYW1lLmlsaWtlLiUke2ZpbHRlcnMuc2VhcmNofSUsZW1haWwuaWxpa2UuJSR7ZmlsdGVycy5zZWFyY2h9JSxjb21wYW55LmlsaWtlLiUke2ZpbHRlcnMuc2VhcmNofSUsbGVhZF9udW1iZXIuaWxpa2UuJSR7ZmlsdGVycy5zZWFyY2h9JWApXG5cdFx0fVxuXG5cdFx0aWYgKGZpbHRlcnMuc3RhdHVzICYmIGZpbHRlcnMuc3RhdHVzICE9PSAnYWxsJykge1xuXHRcdFx0cXVlcnkgPSBxdWVyeS5lcSgnc3RhdHVzJywgZmlsdGVycy5zdGF0dXMpXG5cdFx0fVxuXG5cdFx0aWYgKGZpbHRlcnMuZGF0ZUZyb20pIHF1ZXJ5ID0gcXVlcnkuZ3RlKCdkYXRlJywgZmlsdGVycy5kYXRlRnJvbSlcblx0XHRpZiAoZmlsdGVycy5kYXRlVG8pIHF1ZXJ5ID0gcXVlcnkubHRlKCdkYXRlJywgZmlsdGVycy5kYXRlVG8pXG5cblx0XHRxdWVyeSA9IHF1ZXJ5Lm9yZGVyKHNvcnQsIHsgYXNjZW5kaW5nOiBkaXJlY3Rpb24gPT09ICdhc2MnIH0pXG5cblx0XHRjb25zdCBmcm9tID0gcGFnZSAqIHBhZ2VTaXplXG5cdFx0Y29uc3QgdG8gPSBmcm9tICsgcGFnZVNpemUgLSAxXG5cdFx0cXVlcnkgPSBxdWVyeS5yYW5nZShmcm9tLCB0bylcblxuXHRcdC8vIEFwcGx5IG93bmVyIGZpbHRlciBjb25kaXRpb25hbGx5IGF0IHRoZSBlbmQgdG8gYXZvaWQgVHlwZVNjcmlwdCBjb25mdXNpb24gYWJvdmVcblx0XHRpZiAoZWZmZWN0aXZlT3duZXJJZHMgJiYgZWZmZWN0aXZlT3duZXJJZHMubGVuZ3RoID4gMCkge1xuXHRcdFx0cXVlcnkgPSBxdWVyeS5pbignb3duZXJfaWQnLCBlZmZlY3RpdmVPd25lcklkcylcblx0XHR9XG5cblx0XHRjb25zdCB7IGRhdGEsIGVycm9yLCBjb3VudCB9ID0gYXdhaXQgcXVlcnlcblx0XHRpZiAoZXJyb3IpIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGZldGNoIGxlYWRzOiAke2Vycm9yLm1lc3NhZ2V9YClcblxuXHRcdHJldHVybiB7IGRhdGE6IGRhdGEgfHwgW10sIGNvdW50OiBjb3VudCB8fCAwLCBwYWdlLCBwYWdlU2l6ZSwgdG90YWxQYWdlczogTWF0aC5jZWlsKChjb3VudCB8fCAwKSAvIHBhZ2VTaXplKSB9XG5cdH1cblxuXHRhc3luYyBnZXRCeUlkKGlkOiBzdHJpbmcsIHVzZXJJZDogc3RyaW5nLCBvd25lcklkcz86IHN0cmluZ1tdKTogUHJvbWlzZTxMZWFkIHwgbnVsbD4ge1xuXHRcdGNvbnN0IGVmZmVjdGl2ZU93bmVySWRzID0gb3duZXJJZHMgPT09IHVuZGVmaW5lZCA/IFt1c2VySWRdIDogb3duZXJJZHNcblx0XHRcblx0XHRsZXQgcXVlcnkgPSB0aGlzLmNsaWVudFxuXHRcdFx0LmZyb20oJ2xlYWRzJylcblx0XHRcdC5zZWxlY3QoJyonKVxuXHRcdFx0LmVxKCdpZCcsIGlkKVxuXHRcdFx0LmlzKCdkZWxldGVkX2F0JywgbnVsbClcblx0XHRcdC5saW1pdCgxKVxuXHRcdGlmIChlZmZlY3RpdmVPd25lcklkcyAmJiBlZmZlY3RpdmVPd25lcklkcy5sZW5ndGggPiAwKSB7XG5cdFx0XHRxdWVyeSA9IHF1ZXJ5LmluKCdvd25lcl9pZCcsIGVmZmVjdGl2ZU93bmVySWRzKVxuXHRcdH1cblx0XHRjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBxdWVyeS5zaW5nbGUoKVxuXHRcdGlmIChlcnJvcikge1xuXHRcdFx0aWYgKChlcnJvciBhcyBhbnkpLmNvZGUgPT09ICdQR1JTVDExNicpIHJldHVybiBudWxsXG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBmZXRjaCBsZWFkOiAke2Vycm9yLm1lc3NhZ2V9YClcblx0XHR9XG5cdFx0cmV0dXJuIGRhdGFcblx0fVxuXG5cdGFzeW5jIGNyZWF0ZShsZWFkOiBPbWl0PExlYWRJbnNlcnQsICdpZCcgfCAnY3JlYXRlZF9hdCcgfCAndXBkYXRlZF9hdCc+LCB1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8TGVhZD4ge1xuXHRcdGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHRoaXMuY2xpZW50XG5cdFx0XHQuZnJvbSgnbGVhZHMnKVxuXHRcdFx0Lmluc2VydCh7XG5cdFx0XHRcdC4uLmxlYWQsXG5cdFx0XHRcdG93bmVyX2lkOiB1c2VySWQsXG5cdFx0XHRcdGxlYWRfbnVtYmVyOiAobGVhZCBhcyBhbnkpLmxlYWRfbnVtYmVyIHx8IGBMRUFELSR7RGF0ZS5ub3coKX1gLFxuXHRcdFx0XHRkYXRlOiAobGVhZCBhcyBhbnkpLmRhdGUgfHwgbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuXHRcdFx0fSlcblx0XHRcdC5zZWxlY3QoKVxuXHRcdFx0LnNpbmdsZSgpXG5cdFx0aWYgKGVycm9yKSB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBjcmVhdGUgbGVhZDogJHtlcnJvci5tZXNzYWdlfWApXG5cdFx0cmV0dXJuIGRhdGFcblx0fVxuXG5cdGFzeW5jIHVwZGF0ZShpZDogc3RyaW5nLCB1cGRhdGVzOiBMZWFkVXBkYXRlLCB1c2VySWQ6IHN0cmluZywgb3duZXJJZHM/OiBzdHJpbmdbXSk6IFByb21pc2U8TGVhZD4ge1xuXHRcdGNvbnN0IGVmZmVjdGl2ZU93bmVySWRzID0gb3duZXJJZHMgPT09IHVuZGVmaW5lZCA/IFt1c2VySWRdIDogb3duZXJJZHNcblxuXHRcdGxldCBxdWVyeSA9IHRoaXMuY2xpZW50XG5cdFx0XHQuZnJvbSgnbGVhZHMnKVxuXHRcdFx0LnVwZGF0ZSh1cGRhdGVzKVxuXHRcdFx0LmVxKCdpZCcsIGlkKVxuXHRcdFx0LmlzKCdkZWxldGVkX2F0JywgbnVsbCkgYXMgYW55XG5cblx0XHRpZiAoZWZmZWN0aXZlT3duZXJJZHMgJiYgZWZmZWN0aXZlT3duZXJJZHMubGVuZ3RoID4gMCkge1xuXHRcdFx0cXVlcnkgPSBxdWVyeS5pbignb3duZXJfaWQnLCBlZmZlY3RpdmVPd25lcklkcylcblx0XHR9XG5cblx0XHRjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBxdWVyeS5zZWxlY3QoKS5zaW5nbGUoKVxuXHRcdGlmIChlcnJvcikgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gdXBkYXRlIGxlYWQ6ICR7ZXJyb3IubWVzc2FnZX1gKVxuXHRcdHJldHVybiBkYXRhXG5cdH1cblxuXHRhc3luYyBkZWxldGUoaWQ6IHN0cmluZywgdXNlcklkOiBzdHJpbmcsIG93bmVySWRzPzogc3RyaW5nW10pOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRjb25zdCBlZmZlY3RpdmVPd25lcklkcyA9IG93bmVySWRzID09PSB1bmRlZmluZWQgPyBbdXNlcklkXSA6IG93bmVySWRzXG5cblx0XHRsZXQgcXVlcnkgPSB0aGlzLmNsaWVudFxuXHRcdFx0LmZyb20oJ2xlYWRzJylcblx0XHRcdC51cGRhdGUoeyBkZWxldGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkgfSlcblx0XHRcdC5lcSgnaWQnLCBpZClcblx0XHRcdC5pcygnZGVsZXRlZF9hdCcsIG51bGwpIGFzIGFueVxuXG5cdFx0aWYgKGVmZmVjdGl2ZU93bmVySWRzICYmIGVmZmVjdGl2ZU93bmVySWRzLmxlbmd0aCA+IDApIHtcblx0XHRcdHF1ZXJ5ID0gcXVlcnkuaW4oJ293bmVyX2lkJywgZWZmZWN0aXZlT3duZXJJZHMpXG5cdFx0fVxuXG5cdFx0Y29uc3QgeyBlcnJvciB9ID0gYXdhaXQgcXVlcnlcblx0XHRpZiAoZXJyb3IpIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGRlbGV0ZSBsZWFkOiAke2Vycm9yLm1lc3NhZ2V9YClcblx0fVxufVxuXG5leHBvcnQgY29uc3QgbGVhZHNSZXBvc2l0b3J5ID0gbmV3IExlYWRzUmVwb3NpdG9yeSgpXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuIl0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsInN1cGFiYXNlVXJsIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsInN1cGFiYXNlQW5vbktleSIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIiwiZGVmYXVsdENsaWVudCIsIkxlYWRzUmVwb3NpdG9yeSIsImNvbnN0cnVjdG9yIiwiY2xpZW50Iiwic2V0Q2xpZW50IiwibGlzdCIsIm9wdGlvbnMiLCJmaWx0ZXJzIiwic29ydCIsImRpcmVjdGlvbiIsInBhZ2UiLCJwYWdlU2l6ZSIsInVzZXJJZCIsIm93bmVySWRzIiwiZWZmZWN0aXZlT3duZXJJZHMiLCJ1bmRlZmluZWQiLCJxdWVyeSIsImZyb20iLCJzZWxlY3QiLCJjb3VudCIsImlzIiwic2VhcmNoIiwib3IiLCJzdGF0dXMiLCJlcSIsImRhdGVGcm9tIiwiZ3RlIiwiZGF0ZVRvIiwibHRlIiwib3JkZXIiLCJhc2NlbmRpbmciLCJ0byIsInJhbmdlIiwibGVuZ3RoIiwiaW4iLCJkYXRhIiwiZXJyb3IiLCJFcnJvciIsIm1lc3NhZ2UiLCJ0b3RhbFBhZ2VzIiwiTWF0aCIsImNlaWwiLCJnZXRCeUlkIiwiaWQiLCJsaW1pdCIsInNpbmdsZSIsImNvZGUiLCJjcmVhdGUiLCJsZWFkIiwiaW5zZXJ0Iiwib3duZXJfaWQiLCJsZWFkX251bWJlciIsIkRhdGUiLCJub3ciLCJkYXRlIiwidG9JU09TdHJpbmciLCJ1cGRhdGUiLCJ1cGRhdGVzIiwiZGVsZXRlIiwiZGVsZXRlZF9hdCIsImxlYWRzUmVwb3NpdG9yeSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/server/repositories/leads.ts\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/next@15.2.2_@playwright+test@1.57.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!*********************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@15.2.2_@playwright+test@1.57.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \*********************************************************************************************************************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "@supabase/ssr":
/*!********************************!*\
  !*** external "@supabase/ssr" ***!
  \********************************/
/***/ ((module) => {

"use strict";
module.exports = require("@supabase/ssr");

/***/ }),

/***/ "@supabase/supabase-js":
/*!****************************************!*\
  !*** external "@supabase/supabase-js" ***!
  \****************************************/
/***/ ((module) => {

"use strict";
module.exports = require("@supabase/supabase-js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next@15.2.2_@playwright+test@1.57.0_react-dom@18.3.1_react@18.3.1__react@18.3.1","vendor-chunks/zod@3.25.76"], () => (__webpack_exec__("(rsc)/./node_modules/.pnpm/next@15.2.2_@playwright+test@1.57.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fleads%2Froute&page=%2Fapi%2Fleads%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fleads%2Froute.ts&appDir=D%3A%5CDelta%20IV%5CSofwares%5Cglass%5Csandbox%5Cshadcn-crm-dashboard%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CDelta%20IV%5CSofwares%5Cglass%5Csandbox%5Cshadcn-crm-dashboard&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();