/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/sessions/[id]/route";
exports.ids = ["app/api/sessions/[id]/route"];
exports.modules = {

/***/ "(rsc)/./node_modules/.pnpm/next@15.2.2_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fsessions%2F%5Bid%5D%2Froute&page=%2Fapi%2Fsessions%2F%5Bid%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsessions%2F%5Bid%5D%2Froute.ts&appDir=D%3A%5CDelta%20IV%5CSofwares%5Cglass%5Csandbox%5Cshadcn-crm-dashboard%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CDelta%20IV%5CSofwares%5Cglass%5Csandbox%5Cshadcn-crm-dashboard&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@15.2.2_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fsessions%2F%5Bid%5D%2Froute&page=%2Fapi%2Fsessions%2F%5Bid%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsessions%2F%5Bid%5D%2Froute.ts&appDir=D%3A%5CDelta%20IV%5CSofwares%5Cglass%5Csandbox%5Cshadcn-crm-dashboard%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CDelta%20IV%5CSofwares%5Cglass%5Csandbox%5Cshadcn-crm-dashboard&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/.pnpm/next@15.2.2_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/.pnpm/next@15.2.2_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/.pnpm/next@15.2.2_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var D_Delta_IV_Sofwares_glass_sandbox_shadcn_crm_dashboard_src_app_api_sessions_id_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/sessions/[id]/route.ts */ \"(rsc)/./src/app/api/sessions/[id]/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/sessions/[id]/route\",\n        pathname: \"/api/sessions/[id]\",\n        filename: \"route\",\n        bundlePath: \"app/api/sessions/[id]/route\"\n    },\n    resolvedPagePath: \"D:\\\\Delta IV\\\\Sofwares\\\\glass\\\\sandbox\\\\shadcn-crm-dashboard\\\\src\\\\app\\\\api\\\\sessions\\\\[id]\\\\route.ts\",\n    nextConfigOutput,\n    userland: D_Delta_IV_Sofwares_glass_sandbox_shadcn_crm_dashboard_src_app_api_sessions_id_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vbmV4dEAxNS4yLjJfcmVhY3QtZG9tQDE5LjEuMV9yZWFjdEAxOS4xLjFfX3JlYWN0QDE5LjEuMS9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZzZXNzaW9ucyUyRiU1QmlkJTVEJTJGcm91dGUmcGFnZT0lMkZhcGklMkZzZXNzaW9ucyUyRiU1QmlkJTVEJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGc2Vzc2lvbnMlMkYlNUJpZCU1RCUyRnJvdXRlLnRzJmFwcERpcj1EJTNBJTVDRGVsdGElMjBJViU1Q1NvZndhcmVzJTVDZ2xhc3MlNUNzYW5kYm94JTVDc2hhZGNuLWNybS1kYXNoYm9hcmQlNUNzcmMlNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUQlM0ElNUNEZWx0YSUyMElWJTVDU29md2FyZXMlNUNnbGFzcyU1Q3NhbmRib3glNUNzaGFkY24tY3JtLWRhc2hib2FyZCZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBK0Y7QUFDdkM7QUFDcUI7QUFDcUQ7QUFDbEk7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHlHQUFtQjtBQUMzQztBQUNBLGNBQWMsa0VBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxzREFBc0Q7QUFDOUQ7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDMEY7O0FBRTFGIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkQ6XFxcXERlbHRhIElWXFxcXFNvZndhcmVzXFxcXGdsYXNzXFxcXHNhbmRib3hcXFxcc2hhZGNuLWNybS1kYXNoYm9hcmRcXFxcc3JjXFxcXGFwcFxcXFxhcGlcXFxcc2Vzc2lvbnNcXFxcW2lkXVxcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvc2Vzc2lvbnMvW2lkXS9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3Nlc3Npb25zL1tpZF1cIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3Nlc3Npb25zL1tpZF0vcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJEOlxcXFxEZWx0YSBJVlxcXFxTb2Z3YXJlc1xcXFxnbGFzc1xcXFxzYW5kYm94XFxcXHNoYWRjbi1jcm0tZGFzaGJvYXJkXFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXHNlc3Npb25zXFxcXFtpZF1cXFxccm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICB3b3JrQXN5bmNTdG9yYWdlLFxuICAgICAgICB3b3JrVW5pdEFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/next@15.2.2_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fsessions%2F%5Bid%5D%2Froute&page=%2Fapi%2Fsessions%2F%5Bid%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsessions%2F%5Bid%5D%2Froute.ts&appDir=D%3A%5CDelta%20IV%5CSofwares%5Cglass%5Csandbox%5Cshadcn-crm-dashboard%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CDelta%20IV%5CSofwares%5Cglass%5Csandbox%5Cshadcn-crm-dashboard&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/next@15.2.2_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!*********************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@15.2.2_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \*********************************************************************************************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./src/app/api/sessions/[id]/route.ts":
/*!********************************************!*\
  !*** ./src/app/api/sessions/[id]/route.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DELETE: () => (/* binding */ DELETE),\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   PUT: () => (/* binding */ PUT)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/.pnpm/next@15.2.2_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/api/server.js\");\n/* harmony import */ var _supabase_ssr__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @supabase/ssr */ \"(rsc)/./node_modules/.pnpm/@supabase+ssr@0.7.0_@supabase+supabase-js@2.57.4/node_modules/@supabase/ssr/dist/module/index.js\");\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/.pnpm/next@15.2.2_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/api/headers.js\");\n/* harmony import */ var _server_repositories_sessions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/server/repositories/sessions */ \"(rsc)/./src/server/repositories/sessions.ts\");\n\n\n\n\nasync function getServerClient() {\n    const cookieStore = await (0,next_headers__WEBPACK_IMPORTED_MODULE_2__.cookies)();\n    return (0,_supabase_ssr__WEBPACK_IMPORTED_MODULE_1__.createServerClient)(\"https://hewpwluinbwaizwqhmjc.supabase.co\", \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imhld3B3bHVpbmJ3YWl6d3FobWpjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY5MTU5NTEsImV4cCI6MjA3MjQ5MTk1MX0.jhKzLYPdixxI8zcH20kkzL1WgP9RB33FeHtO0FRY7r4\", {\n        cookies: {\n            getAll () {\n                return cookieStore.getAll();\n            },\n            setAll (cookiesToSet) {\n                cookiesToSet.forEach(({ name, value, options })=>cookieStore.set(name, value, options));\n            }\n        }\n    });\n}\nasync function GET(request, { params }) {\n    try {\n        const supabase = await getServerClient();\n        const { id } = await params;\n        // Verify user is authenticated\n        const { data: { user } } = await supabase.auth.getUser();\n        if (!user) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: 'Unauthorized'\n        }, {\n            status: 401\n        });\n        const repository = new _server_repositories_sessions__WEBPACK_IMPORTED_MODULE_3__.SessionsRepository(supabase);\n        const session = await repository.findById(id, user.id);\n        if (!session) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: 'Session not found'\n        }, {\n            status: 404\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(session);\n    } catch (error) {\n        console.error('Session fetch error:', error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: 'Internal server error'\n        }, {\n            status: 500\n        });\n    }\n}\nasync function PUT(request, { params }) {\n    try {\n        const supabase = await getServerClient();\n        const { id } = await params;\n        // Verify user is authenticated\n        const { data: { user } } = await supabase.auth.getUser();\n        if (!user) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: 'Unauthorized'\n        }, {\n            status: 401\n        });\n        const body = await request.json();\n        const repository = new _server_repositories_sessions__WEBPACK_IMPORTED_MODULE_3__.SessionsRepository(supabase);\n        const session = await repository.update(id, body, user.id);\n        // Log activity on end (best-effort)\n        __webpack_require__.e(/*! import() */ \"_rsc_src_app_api__lib_log-activity_ts\").then(__webpack_require__.bind(__webpack_require__, /*! @/app/api/_lib/log-activity */ \"(rsc)/./src/app/api/_lib/log-activity.ts\")).then(async ({ logActivity })=>{\n            const ending = body?.status === 'completed' || body?.status === 'cancelled';\n            if (ending) {\n                await logActivity(supabase, user.id, {\n                    type: 'user',\n                    description: `Session ended`,\n                    entity: id,\n                    details: {\n                        id\n                    }\n                });\n            }\n        }).catch(()=>{});\n        // Trigger report generation on session end (idempotent, async)\n        try {\n            const ending = body?.status === 'completed' || body?.status === 'cancelled';\n            if (ending) {\n                const origin = new URL(request.url).origin;\n                // In-app preferred: trigger Summary + Chance-of-Sale separately\n                fetch(origin + '/api/sessions/' + id + '/summary', {\n                    method: 'POST'\n                }).catch(()=>{});\n                fetch(origin + '/api/sessions/' + id + '/chance-of-sale', {\n                    method: 'POST'\n                }).catch(()=>{});\n            }\n        } catch  {}\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(session);\n    } catch (error) {\n        console.error('Session update error:', error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: 'Failed to update session'\n        }, {\n            status: 500\n        });\n    }\n}\nasync function DELETE(request, { params }) {\n    try {\n        const supabase = await getServerClient();\n        const { id } = await params;\n        // Verify user is authenticated\n        const { data: { user } } = await supabase.auth.getUser();\n        if (!user) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: 'Unauthorized'\n        }, {\n            status: 401\n        });\n        const repository = new _server_repositories_sessions__WEBPACK_IMPORTED_MODULE_3__.SessionsRepository(supabase);\n        await repository.delete(id, user.id);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true\n        });\n    } catch (error) {\n        console.error('Session deletion error:', error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: 'Failed to delete session'\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9zZXNzaW9ucy9baWRdL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBdUQ7QUFDTDtBQUNaO0FBQzZCO0FBRW5FLGVBQWVJO0lBQ2QsTUFBTUMsY0FBYyxNQUFNSCxxREFBT0E7SUFDakMsT0FBT0QsaUVBQWtCQSxDQUN4QkssMENBQW9DLEVBQ3BDQSxrTkFBeUMsRUFDekM7UUFDQ0osU0FBUztZQUNSUTtnQkFDQyxPQUFPTCxZQUFZSyxNQUFNO1lBQzFCO1lBQ0FDLFFBQU9DLFlBQVk7Z0JBQ2xCQSxhQUFhQyxPQUFPLENBQUMsQ0FBQyxFQUFFQyxJQUFJLEVBQUVDLEtBQUssRUFBRUMsT0FBTyxFQUFFLEdBQUtYLFlBQVlZLEdBQUcsQ0FBQ0gsTUFBTUMsT0FBT0M7WUFDakY7UUFDRDtJQUNEO0FBRUY7QUFFTyxlQUFlRSxJQUNyQkMsT0FBb0IsRUFDcEIsRUFBRUMsTUFBTSxFQUF1QztJQUUvQyxJQUFJO1FBQ0gsTUFBTUMsV0FBVyxNQUFNakI7UUFDdkIsTUFBTSxFQUFFa0IsRUFBRSxFQUFFLEdBQUcsTUFBTUY7UUFDckIsK0JBQStCO1FBQy9CLE1BQU0sRUFBRUcsTUFBTSxFQUFFQyxJQUFJLEVBQUUsRUFBRSxHQUFHLE1BQU1ILFNBQVNJLElBQUksQ0FBQ0MsT0FBTztRQUN0RCxJQUFJLENBQUNGLE1BQU0sT0FBT3hCLHFEQUFZQSxDQUFDMkIsSUFBSSxDQUFDO1lBQUVDLE9BQU87UUFBZSxHQUFHO1lBQUVDLFFBQVE7UUFBSTtRQUU3RSxNQUFNQyxhQUFhLElBQUkzQiw2RUFBa0JBLENBQUNrQjtRQUMxQyxNQUFNVSxVQUFVLE1BQU1ELFdBQVdFLFFBQVEsQ0FBQ1YsSUFBSUUsS0FBS0YsRUFBRTtRQUNyRCxJQUFJLENBQUNTLFNBQVMsT0FBTy9CLHFEQUFZQSxDQUFDMkIsSUFBSSxDQUFDO1lBQUVDLE9BQU87UUFBb0IsR0FBRztZQUFFQyxRQUFRO1FBQUk7UUFDckYsT0FBTzdCLHFEQUFZQSxDQUFD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QUFJLENBQUM7WUFBRXlCLFNBQVM7UUFBSztJQUMxQyxFQUFFLE9BQU94QixPQUFPO1FBQ2ZLLFFBQVFMLEtBQUssQ0FBQywyQkFBMkJBO1FBQ3pDLE9BQU81QixxREFBWUEsQ0FBQzJCLElBQUksQ0FBQztZQUFFQyxPQUFPO1FBQTJCLEdBQUc7WUFBRUMsUUFBUTtRQUFJO0lBQy9FO0FBQ0QiLCJzb3VyY2VzIjpbIkQ6XFxEZWx0YSBJVlxcU29md2FyZXNcXGdsYXNzXFxzYW5kYm94XFxzaGFkY24tY3JtLWRhc2hib2FyZFxcc3JjXFxhcHBcXGFwaVxcc2Vzc2lvbnNcXFtpZF1cXHJvdXRlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcidcclxuaW1wb3J0IHsgY3JlYXRlU2VydmVyQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3NzcidcclxuaW1wb3J0IHsgY29va2llcyB9IGZyb20gJ25leHQvaGVhZGVycydcclxuaW1wb3J0IHsgU2Vzc2lvbnNSZXBvc2l0b3J5IH0gZnJvbSAnQC9zZXJ2ZXIvcmVwb3NpdG9yaWVzL3Nlc3Npb25zJ1xyXG5cclxuYXN5bmMgZnVuY3Rpb24gZ2V0U2VydmVyQ2xpZW50KCkge1xyXG5cdGNvbnN0IGNvb2tpZVN0b3JlID0gYXdhaXQgY29va2llcygpXHJcblx0cmV0dXJuIGNyZWF0ZVNlcnZlckNsaWVudChcclxuXHRcdHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCEsXHJcblx0XHRwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSEsXHJcblx0XHR7XHJcblx0XHRcdGNvb2tpZXM6IHtcclxuXHRcdFx0XHRnZXRBbGwoKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gY29va2llU3RvcmUuZ2V0QWxsKClcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdHNldEFsbChjb29raWVzVG9TZXQpIHtcclxuXHRcdFx0XHRcdGNvb2tpZXNUb1NldC5mb3JFYWNoKCh7IG5hbWUsIHZhbHVlLCBvcHRpb25zIH0pID0+IGNvb2tpZVN0b3JlLnNldChuYW1lLCB2YWx1ZSwgb3B0aW9ucykpXHJcblx0XHRcdFx0fSxcclxuXHRcdFx0fSxcclxuXHRcdH1cclxuXHQpXHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQoXHJcblx0cmVxdWVzdDogTmV4dFJlcXVlc3QsXHJcblx0eyBwYXJhbXMgfTogeyBwYXJhbXM6IFByb21pc2U8eyBpZDogc3RyaW5nIH0+IH1cclxuKSB7XHJcblx0dHJ5IHtcclxuXHRcdGNvbnN0IHN1cGFiYXNlID0gYXdhaXQgZ2V0U2VydmVyQ2xpZW50KClcclxuXHRcdGNvbnN0IHsgaWQgfSA9IGF3YWl0IHBhcmFtc1xyXG5cdFx0Ly8gVmVyaWZ5IHVzZXIgaXMgYXV0aGVudGljYXRlZFxyXG5cdFx0Y29uc3QgeyBkYXRhOiB7IHVzZXIgfSB9ID0gYXdhaXQgc3VwYWJhc2UuYXV0aC5nZXRVc2VyKClcclxuXHRcdGlmICghdXNlcikgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdVbmF1dGhvcml6ZWQnIH0sIHsgc3RhdHVzOiA0MDEgfSlcclxuXHJcblx0XHRjb25zdCByZXBvc2l0b3J5ID0gbmV3IFNlc3Npb25zUmVwb3NpdG9yeShzdXBhYmFzZSlcclxuXHRcdGNvbnN0IHNlc3Npb24gPSBhd2FpdCByZXBvc2l0b3J5LmZpbmRCeUlkKGlkLCB1c2VyLmlkKVxyXG5cdFx0aWYgKCFzZXNzaW9uKSByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ1Nlc3Npb24gbm90IGZvdW5kJyB9LCB7IHN0YXR1czogNDA0IH0pXHJcblx0XHRyZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oc2Vzc2lvbilcclxuXHR9IGNhdGNoIChlcnJvcikge1xyXG5cdFx0Y29uc29sZS5lcnJvcignU2Vzc2lvbiBmZXRjaCBlcnJvcjonLCBlcnJvcilcclxuXHRcdHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9LCB7IHN0YXR1czogNTAwIH0pXHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUFVUKFxyXG5cdHJlcXVlc3Q6IE5leHRSZXF1ZXN0LFxyXG5cdHsgcGFyYW1zIH06IHsgcGFyYW1zOiBQcm9taXNlPHsgaWQ6IHN0cmluZyB9PiB9XHJcbikge1xyXG5cdHRyeSB7XHJcblx0XHRjb25zdCBzdXBhYmFzZSA9IGF3YWl0IGdldFNlcnZlckNsaWVudCgpXHJcblx0XHRjb25zdCB7IGlkIH0gPSBhd2FpdCBwYXJhbXNcclxuXHRcdC8vIFZlcmlmeSB1c2VyIGlzIGF1dGhlbnRpY2F0ZWRcclxuXHRcdGNvbnN0IHsgZGF0YTogeyB1c2VyIH0gfSA9IGF3YWl0IHN1cGFiYXNlLmF1dGguZ2V0VXNlcigpXHJcblx0XHRpZiAoIXVzZXIpIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnVW5hdXRob3JpemVkJyB9LCB7IHN0YXR1czogNDAxIH0pXHJcblxyXG5cdFx0Y29uc3QgYm9keSA9IGF3YWl0IHJlcXVlc3QuanNvbigpXHJcblx0XHRjb25zdCByZXBvc2l0b3J5ID0gbmV3IFNlc3Npb25zUmVwb3NpdG9yeShzdXBhYmFzZSlcclxuXHRcdGNvbnN0IHNlc3Npb24gPSBhd2FpdCByZXBvc2l0b3J5LnVwZGF0ZShpZCwgYm9keSwgdXNlci5pZClcclxuXHRcdC8vIExvZyBhY3Rpdml0eSBvbiBlbmQgKGJlc3QtZWZmb3J0KVxyXG5cdFx0aW1wb3J0KCdAL2FwcC9hcGkvX2xpYi9sb2ctYWN0aXZpdHknKS50aGVuKGFzeW5jICh7IGxvZ0FjdGl2aXR5IH0pID0+IHtcclxuXHRcdFx0Y29uc3QgZW5kaW5nID0gKGJvZHkgYXMgYW55KT8uc3RhdHVzID09PSAnY29tcGxldGVkJyB8fCAoYm9keSBhcyBhbnkpPy5zdGF0dXMgPT09ICdjYW5jZWxsZWQnXHJcblx0XHRcdGlmIChlbmRpbmcpIHtcclxuXHRcdFx0XHRhd2FpdCBsb2dBY3Rpdml0eShzdXBhYmFzZSBhcyBhbnksIHVzZXIuaWQsIHtcclxuXHRcdFx0XHRcdHR5cGU6ICd1c2VyJyxcclxuXHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBgU2Vzc2lvbiBlbmRlZGAsXHJcblx0XHRcdFx0XHRlbnRpdHk6IGlkLFxyXG5cdFx0XHRcdFx0ZGV0YWlsczogeyBpZCB9XHJcblx0XHRcdFx0fSlcclxuXHRcdFx0fVxyXG5cdFx0fSkuY2F0Y2goKCkgPT4ge30pXHJcblx0XHRcdFx0Ly8gVHJpZ2dlciByZXBvcnQgZ2VuZXJhdGlvbiBvbiBzZXNzaW9uIGVuZCAoaWRlbXBvdGVudCwgYXN5bmMpXHJcblx0XHR0cnkge1xyXG5cdFx0XHRjb25zdCBlbmRpbmcgPSAoYm9keSBhcyBhbnkpPy5zdGF0dXMgPT09ICdjb21wbGV0ZWQnIHx8IChib2R5IGFzIGFueSk/LnN0YXR1cyA9PT0gJ2NhbmNlbGxlZCdcclxuXHRcdFx0XHRpZiAoZW5kaW5nKSB7XG5cdFx0XHRcdFx0Y29uc3Qgb3JpZ2luID0gbmV3IFVSTChyZXF1ZXN0LnVybCkub3JpZ2luXG5cdFx0XHRcdFx0Ly8gSW4tYXBwIHByZWZlcnJlZDogdHJpZ2dlciBTdW1tYXJ5ICsgQ2hhbmNlLW9mLVNhbGUgc2VwYXJhdGVseVxuXHRcdFx0XHRcdGZldGNoKG9yaWdpbiArICcvYXBpL3Nlc3Npb25zLycgKyBpZCArICcvc3VtbWFyeScsIHsgbWV0aG9kOiAnUE9TVCcgfSkuY2F0Y2goKCkgPT4ge30pXG5cdFx0XHRcdFx0ZmV0Y2gob3JpZ2luICsgJy9hcGkvc2Vzc2lvbnMvJyArIGlkICsgJy9jaGFuY2Utb2Ytc2FsZScsIHsgbWV0aG9kOiAnUE9TVCcgfSkuY2F0Y2goKCkgPT4ge30pXG5cdFx0XHRcdH1cblx0XHR9IGNhdGNoIHt9XHJcblx0XHRyZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oc2Vzc2lvbilcclxuXHR9IGNhdGNoIChlcnJvcikge1xyXG5cdFx0Y29uc29sZS5lcnJvcignU2Vzc2lvbiB1cGRhdGUgZXJyb3I6JywgZXJyb3IpXHJcblx0XHRyZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ0ZhaWxlZCB0byB1cGRhdGUgc2Vzc2lvbicgfSwgeyBzdGF0dXM6IDUwMCB9KVxyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIERFTEVURShcclxuXHRyZXF1ZXN0OiBOZXh0UmVxdWVzdCxcclxuXHR7IHBhcmFtcyB9OiB7IHBhcmFtczogUHJvbWlzZTx7IGlkOiBzdHJpbmcgfT4gfVxyXG4pIHtcclxuXHR0cnkge1xyXG5cdFx0Y29uc3Qgc3VwYWJhc2UgPSBhd2FpdCBnZXRTZXJ2ZXJDbGllbnQoKVxyXG5cdFx0Y29uc3QgeyBpZCB9ID0gYXdhaXQgcGFyYW1zXHJcblx0XHQvLyBWZXJpZnkgdXNlciBpcyBhdXRoZW50aWNhdGVkXHJcblx0XHRjb25zdCB7IGRhdGE6IHsgdXNlciB9IH0gPSBhd2FpdCBzdXBhYmFzZS5hdXRoLmdldFVzZXIoKVxyXG5cdFx0aWYgKCF1c2VyKSByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ1VuYXV0aG9yaXplZCcgfSwgeyBzdGF0dXM6IDQwMSB9KVxyXG5cclxuXHRcdGNvbnN0IHJlcG9zaXRvcnkgPSBuZXcgU2Vzc2lvbnNSZXBvc2l0b3J5KHN1cGFiYXNlKVxyXG5cdFx0YXdhaXQgcmVwb3NpdG9yeS5kZWxldGUoaWQsIHVzZXIuaWQpXHJcblx0XHRyZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBzdWNjZXNzOiB0cnVlIH0pXHJcblx0fSBjYXRjaCAoZXJyb3IpIHtcclxuXHRcdGNvbnNvbGUuZXJyb3IoJ1Nlc3Npb24gZGVsZXRpb24gZXJyb3I6JywgZXJyb3IpXHJcblx0XHRyZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ0ZhaWxlZCB0byBkZWxldGUgc2Vzc2lvbicgfSwgeyBzdGF0dXM6IDUwMCB9KVxyXG5cdH1cclxufVxyXG5cclxuXHJcblxyXG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiY3JlYXRlU2VydmVyQ2xpZW50IiwiY29va2llcyIsIlNlc3Npb25zUmVwb3NpdG9yeSIsImdldFNlcnZlckNsaWVudCIsImNvb2tpZVN0b3JlIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIiwiZ2V0QWxsIiwic2V0QWxsIiwiY29va2llc1RvU2V0IiwiZm9yRWFjaCIsIm5hbWUiLCJ2YWx1ZSIsIm9wdGlvbnMiLCJzZXQiLCJHRVQiLCJyZXF1ZXN0IiwicGFyYW1zIiwic3VwYWJhc2UiLCJpZCIsImRhdGEiLCJ1c2VyIiwiYXV0aCIsImdldFVzZXIiLCJqc29uIiwiZXJyb3IiLCJzdGF0dXMiLCJyZXBvc2l0b3J5Iiwic2Vzc2lvbiIsImZpbmRCeUlkIiwiY29uc29sZSIsIlBVVCIsImJvZHkiLCJ1cGRhdGUiLCJ0aGVuIiwibG9nQWN0aXZpdHkiLCJlbmRpbmciLCJ0eXBlIiwiZGVzY3JpcHRpb24iLCJlbnRpdHkiLCJkZXRhaWxzIiwiY2F0Y2giLCJvcmlnaW4iLCJVUkwiLCJ1cmwiLCJmZXRjaCIsIm1ldGhvZCIsIkRFTEVURSIsImRlbGV0ZSIsInN1Y2Nlc3MiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/sessions/[id]/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/server/repositories/sessions.ts":
/*!*********************************************!*\
  !*** ./src/server/repositories/sessions.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SessionsRepository: () => (/* binding */ SessionsRepository)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/.pnpm/@supabase+supabase-js@2.57.4/node_modules/@supabase/supabase-js/dist/module/index.js\");\n\n// Use untyped client until schema is applied and types regenerated\nconst supabaseUrl = \"https://hewpwluinbwaizwqhmjc.supabase.co\";\nconst supabaseAnonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imhld3B3bHVpbmJ3YWl6d3FobWpjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY5MTU5NTEsImV4cCI6MjA3MjQ5MTk1MX0.jhKzLYPdixxI8zcH20kkzL1WgP9RB33FeHtO0FRY7r4\";\nconst defaultClient = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseAnonKey);\nfunction mapDbSession(row) {\n    const startedAt = row.started_at ? new Date(row.started_at) : null;\n    const fallbackTitle = startedAt ? `Session @ ${startedAt.toLocaleTimeString('en-GB', {\n        hour12: false\n    })}` : 'Session';\n    // Heuristic: if title_enc looks like base64/opaque, use fallback for display\n    const looksEncoded = typeof row.title_enc === 'string' && /^[A-Za-z0-9+/=]{20,}$/.test(row.title_enc);\n    return {\n        id: row.id,\n        owner_id: row.user_id,\n        subject_id: row.subject_id || null,\n        title: row.title_enc && !looksEncoded ? row.title_enc : fallbackTitle,\n        type: row.session_type,\n        status: row.ended_at ? 'completed' : 'active',\n        started_at: row.started_at,\n        ended_at: row.ended_at,\n        created_at: row.started_at,\n        updated_at: row.updated_at\n    };\n}\nclass SessionsRepository {\n    constructor(supabase = defaultClient){\n        this.supabase = supabase;\n    }\n    async findAll(options) {\n        const { filters = {}, sort = 'started_at', direction = 'desc', page = 1, pageSize = 10, userId } = options;\n        const sortColumn = [\n            'started_at',\n            'updated_at',\n            'ended_at'\n        ].includes(sort) ? sort : 'started_at';\n        let query = this.supabase.from('sessions').select('id,user_id,subject_id,title_enc,session_type,started_at,ended_at,updated_at', {\n            count: 'estimated'\n        }).eq('user_id', userId);\n        // Apply filters\n        if (filters.search) {\n            query = query.ilike('title_enc', `%${filters.search}%`);\n        }\n        if (filters.status && filters.status !== 'all') {\n            if (filters.status === 'active') {\n                query = query.is('ended_at', null);\n            } else if (filters.status === 'completed' || filters.status === 'cancelled') {\n                query = query.not('ended_at', 'is', null);\n            }\n        }\n        if (filters.type) {\n            query = query.eq('session_type', filters.type);\n        }\n        if (filters.dateFrom) {\n            query = query.gte('started_at', filters.dateFrom);\n        }\n        if (filters.dateTo) {\n            query = query.lte('started_at', filters.dateTo);\n        }\n        // Apply sorting\n        query = query.order(sortColumn, {\n            ascending: direction === 'asc'\n        });\n        // Apply pagination (1-based to 0-based conversion)\n        const from = (page - 1) * pageSize;\n        const to = from + pageSize - 1;\n        query = query.range(from, to);\n        const { data: rows, error, count } = await query;\n        if (error) {\n            throw new Error(`Failed to fetch sessions: ${error.message}`);\n        }\n        const baseRows = rows || [];\n        // Enrich with contact phone via subject lookup (prefer customer over lead)\n        const phoneBySubject = {};\n        const subjectIds = Array.from(new Set(baseRows.map((r)=>r.subject_id).filter((v)=>!!v)));\n        if (subjectIds.length > 0) {\n            // Fetch customer phones in bulk\n            const { data: custRows, error: custErr } = await this.supabase.from('customers').select('subject_id, phone').in('subject_id', subjectIds).eq('owner_id', userId);\n            if (!custErr && Array.isArray(custRows)) {\n                for (const r of custRows){\n                    if (r.subject_id && r.phone) phoneBySubject[r.subject_id] = r.phone;\n                }\n            }\n            // Fetch lead phones where customer missing\n            const missing = subjectIds.filter((id)=>!phoneBySubject[id]);\n            if (missing.length > 0) {\n                const { data: leadRows } = await this.supabase.from('leads').select('subject_id, phone').in('subject_id', missing).eq('owner_id', userId);\n                if (Array.isArray(leadRows)) {\n                    for (const r of leadRows){\n                        if (r.subject_id && r.phone && !phoneBySubject[r.subject_id]) {\n                            phoneBySubject[r.subject_id] = r.phone;\n                        }\n                    }\n                }\n            }\n        }\n        const sessions = baseRows.map((r)=>{\n            const s = mapDbSession(r);\n            const phone = r.subject_id ? phoneBySubject[r.subject_id] : undefined;\n            return phone ? {\n                ...s,\n                phone\n            } : s;\n        });\n        const total = count || 0;\n        const totalPages = Math.ceil(total / pageSize);\n        return {\n            sessions,\n            total,\n            page,\n            pageSize,\n            totalPages\n        };\n    }\n    async findById(id, userId) {\n        const { data: row, error } = await this.supabase.from('sessions').select('id,user_id,subject_id,title_enc,session_type,started_at,ended_at,updated_at').eq('id', id).eq('user_id', userId).single();\n        if (error) {\n            if (error.code === 'PGRST116') {\n                return null // Not found\n                ;\n            }\n            throw new Error(`Failed to fetch session: ${error.message}`);\n        }\n        return mapDbSession(row);\n    }\n    async create(sessionData, userId) {\n        const requestedType = sessionData?.type || 'ask';\n        const { data: newSessionId, error: rpcError } = await this.supabase.rpc('get_or_create_active_session', {\n            requested_type: requestedType\n        });\n        if (rpcError) {\n            throw new Error(`Failed to create session: ${rpcError.message}`);\n        }\n        const { data: row, error } = await this.supabase.from('sessions').select('id,user_id,subject_id,title_enc,session_type,started_at,ended_at,updated_at').eq('id', newSessionId).eq('user_id', userId).single();\n        if (error) {\n            throw new Error(`Failed to fetch created session: ${error.message}`);\n        }\n        return mapDbSession(row);\n    }\n    async update(id, sessionData, userId) {\n        // Support title update and ending a session\n        if (sessionData?.status === 'completed' || sessionData?.status === 'cancelled') {\n            const { error: endErr } = await this.supabase.rpc('end_session', {\n                session_id: id\n            });\n            if (endErr) throw new Error(`Failed to end session: ${endErr.message}`);\n        }\n        if (sessionData?.title) {\n            const { error: updErr } = await this.supabase.from('sessions').update({\n                title_enc: sessionData.title\n            }).eq('id', id).eq('user_id', userId);\n            if (updErr) throw new Error(`Failed to update session: ${updErr.message}`);\n        }\n        const { data: row, error } = await this.supabase.from('sessions').select('id,user_id,subject_id,title_enc,session_type,started_at,ended_at,updated_at').eq('id', id).eq('user_id', userId).single();\n        if (error) throw new Error(`Failed to fetch session: ${error.message}`);\n        return mapDbSession(row);\n    }\n    async delete(id, userId) {\n        const { error } = await this.supabase.from('sessions').delete().eq('id', id).eq('user_id', userId);\n        if (error) throw new Error(`Failed to delete session: ${error.message}`);\n    }\n    async getStats(userId) {\n        const [total, active, completed] = await Promise.all([\n            this.supabase.from('sessions').select('*', {\n                count: 'exact',\n                head: true\n            }).eq('user_id', userId),\n            this.supabase.from('sessions').select('*', {\n                count: 'exact',\n                head: true\n            }).eq('user_id', userId).is('ended_at', null),\n            this.supabase.from('sessions').select('*', {\n                count: 'exact',\n                head: true\n            }).eq('user_id', userId).not('ended_at', 'is', null)\n        ]);\n        return {\n            total: total.count || 0,\n            active: active.count || 0,\n            completed: completed.count || 0,\n            cancelled: 0\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvc2VydmVyL3JlcG9zaXRvcmllcy9zZXNzaW9ucy50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUFvRDtBQUVwRCxtRUFBbUU7QUFDbkUsTUFBTUMsY0FBY0MsMENBQW9DO0FBQ3hELE1BQU1HLGtCQUFrQkgsa05BQXlDO0FBQ2pFLE1BQU1LLGdCQUFnQlAsbUVBQVlBLENBQUNDLGFBQWFJO0FBMEJoRCxTQUFTRyxhQUFhQyxHQUFRO0lBQzdCLE1BQU1DLFlBQVlELElBQUlFLFVBQVUsR0FBRyxJQUFJQyxLQUFLSCxJQUFJRSxVQUFVLElBQUk7SUFDOUQsTUFBTUUsZ0JBQWdCSCxZQUFZLENBQUMsVUFBVSxFQUFFQSxVQUFVSSxrQkFBa0IsQ0FBQyxTQUFTO1FBQUVDLFFBQVE7SUFBTSxJQUFJLEdBQUc7SUFDNUcsNkVBQTZFO0lBQzdFLE1BQU1DLGVBQWUsT0FBT1AsSUFBSVEsU0FBUyxLQUFLLFlBQVksd0JBQXdCQyxJQUFJLENBQUNULElBQUlRLFNBQVM7SUFDcEcsT0FBTztRQUNORSxJQUFJVixJQUFJVSxFQUFFO1FBQ1ZDLFVBQVVYLElBQUlZLE9BQU87UUFDckJDLFlBQVliLElBQUlhLFVBQVUsSUFBSTtRQUM5QkMsT0FBTyxJQUFLTixTQUFTLElBQUksQ0FBQ0QsZUFBZ0JQLElBQUlRLFNBQVMsR0FBR0o7UUFDMURXLE1BQU1mLElBQUlnQixZQUFZO1FBQ3RCQyxRQUFRakIsSUFBSWtCLFFBQVEsR0FBRyxjQUFjO1FBQ3JDaEIsWUFBWUYsSUFBSUUsVUFBVTtRQUMxQmdCLFVBQVVsQixJQUFJa0IsUUFBUTtRQUN0QkMsWUFBWW5CLElBQUlFLFVBQVU7UUFDMUJrQixZQUFZcEIsSUFBSW9CLFVBQVU7SUFDM0I7QUFDRDtBQUVPLE1BQU1DO0lBQ1RDLFlBQVksV0FBc0N4QixhQUFhLENBQUU7YUFBN0N5QixXQUFBQTtJQUE4QztJQUVsRSxNQUFNQyxRQUFRQyxPQUEyQixFQU10QztRQUNMLE1BQU0sRUFDTEMsVUFBVSxDQUFDLENBQUMsRUFD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UUFDaEIsSUFBSXNCLE9BQU8sTUFBTSxJQUFJQyxNQUFNLENBQUMsMEJBQTBCLEVBQUVELE1BQU1FLE9BQU8sRUFBRTtJQUN4RTtJQUVBLE1BQU13QyxTQUFTaEUsTUFBYyxFQUsxQjtRQUNGLE1BQU0sQ0FBQzZDLE9BQU9vQixRQUFRQyxVQUFVLEdBQUcsTUFBTUMsUUFBUUMsR0FBRyxDQUFDO1lBQ3BELElBQUksQ0FBQzVFLFFBQVEsQ0FBQ1ksSUFBSSxDQUFDLFlBQVlDLE1BQU0sQ0FBQyxLQUFLO2dCQUFFQyxPQUFPO2dCQUFTK0QsTUFBTTtZQUFLLEdBQUc5RCxFQUFFLENBQUMsV0FBV1A7WUFDekYsSUFBSSxDQUFDUixRQUFRLENBQUNZLElBQUksQ0FBQyxZQUFZQyxNQUFNLENBQUMsS0FBSztnQkFBRUMsT0FBTztnQkFBUytELE1BQU07WUFBSyxHQUFHOUQsRUFBRSxDQUFDLFdBQVdQLFFBQVFVLEVBQUUsQ0FBQyxZQUFZO1lBQ2hILElBQUksQ0FBQ2xCLFFBQVEsQ0FBQ1ksSUFBSSxDQUFDLFlBQVlDLE1BQU0sQ0FBQyxLQUFLO2dCQUFFQyxPQUFPO2dCQUFTK0QsTUFBTTtZQUFLLEdBQUc5RCxFQUFFLENBQUMsV0FBV1AsUUFBUVcsR0FBRyxDQUFDLFlBQVksTUFBTTtTQUN2SDtRQUVELE9BQU87WUFDTmtDLE9BQU8sTUFBT3ZDLEtBQUssSUFBZTtZQUNsQzJELFFBQVEsT0FBUTNELEtBQUssSUFBZTtZQUNwQzRELFdBQVcsVUFBVzVELEtBQUssSUFBZTtZQUMxQ2dFLFdBQVc7UUFDWjtJQUNEO0FBQ0QiLCJzb3VyY2VzIjpbIkQ6XFxEZWx0YSBJVlxcU29md2FyZXNcXGdsYXNzXFxzYW5kYm94XFxzaGFkY24tY3JtLWRhc2hib2FyZFxcc3JjXFxzZXJ2ZXJcXHJlcG9zaXRvcmllc1xcc2Vzc2lvbnMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJ1xuXG4vLyBVc2UgdW50eXBlZCBjbGllbnQgdW50aWwgc2NoZW1hIGlzIGFwcGxpZWQgYW5kIHR5cGVzIHJlZ2VuZXJhdGVkXG5jb25zdCBzdXBhYmFzZVVybCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCFcbmNvbnN0IHN1cGFiYXNlQW5vbktleSA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIVxuY29uc3QgZGVmYXVsdENsaWVudCA9IGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VBbm9uS2V5KVxuXG4vLyBUZW1wb3JhcnkgdHlwZXMgdW50aWwgc2NoZW1hIGlzIGFwcGxpZWRcbnR5cGUgU2Vzc2lvbiA9IGFueVxudHlwZSBTZXNzaW9uSW5zZXJ0ID0gYW55XG50eXBlIFNlc3Npb25VcGRhdGUgPSBhbnlcblxudHlwZSBTdXBhYmFzZUNsaWVudEFueSA9IHR5cGVvZiBkZWZhdWx0Q2xpZW50XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2Vzc2lvbkZpbHRlcnMge1xuXHRzZWFyY2g/OiBzdHJpbmdcblx0c3RhdHVzPzogJ2FsbCcgfCAnYWN0aXZlJyB8ICdjb21wbGV0ZWQnIHwgJ2NhbmNlbGxlZCdcblx0ZGF0ZUZyb20/OiBzdHJpbmdcblx0ZGF0ZVRvPzogc3RyaW5nXG5cdHR5cGU/OiBzdHJpbmdcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTZXNzaW9uTGlzdE9wdGlvbnMge1xuXHRmaWx0ZXJzPzogU2Vzc2lvbkZpbHRlcnNcblx0c29ydD86IHN0cmluZ1xuXHRkaXJlY3Rpb24/OiAnYXNjJyB8ICdkZXNjJ1xuXHRwYWdlPzogbnVtYmVyXG5cdHBhZ2VTaXplPzogbnVtYmVyXG5cdHVzZXJJZDogc3RyaW5nXG59XG5cbmZ1bmN0aW9uIG1hcERiU2Vzc2lvbihyb3c6IGFueSk6IGFueSB7XG5cdGNvbnN0IHN0YXJ0ZWRBdCA9IHJvdy5zdGFydGVkX2F0ID8gbmV3IERhdGUocm93LnN0YXJ0ZWRfYXQpIDogbnVsbFxuXHRjb25zdCBmYWxsYmFja1RpdGxlID0gc3RhcnRlZEF0ID8gYFNlc3Npb24gQCAke3N0YXJ0ZWRBdC50b0xvY2FsZVRpbWVTdHJpbmcoJ2VuLUdCJywgeyBob3VyMTI6IGZhbHNlIH0pfWAgOiAnU2Vzc2lvbidcblx0Ly8gSGV1cmlzdGljOiBpZiB0aXRsZV9lbmMgbG9va3MgbGlrZSBiYXNlNjQvb3BhcXVlLCB1c2UgZmFsbGJhY2sgZm9yIGRpc3BsYXlcblx0Y29uc3QgbG9va3NFbmNvZGVkID0gdHlwZW9mIHJvdy50aXRsZV9lbmMgPT09ICdzdHJpbmcnICYmIC9eW0EtWmEtejAtOSsvPV17MjAsfSQvLnRlc3Qocm93LnRpdGxlX2VuYylcblx0cmV0dXJuIHtcblx0XHRpZDogcm93LmlkLFxuXHRcdG93bmVyX2lkOiByb3cudXNlcl9pZCxcblx0XHRzdWJqZWN0X2lkOiByb3cuc3ViamVjdF9pZCB8fCBudWxsLFxuXHRcdHRpdGxlOiAocm93LnRpdGxlX2VuYyAmJiAhbG9va3NFbmNvZGVkKSA/IHJvdy50aXRsZV9lbmMgOiBmYWxsYmFja1RpdGxlLFxuXHRcdHR5cGU6IHJvdy5zZXNzaW9uX3R5cGUsXG5cdFx0c3RhdHVzOiByb3cuZW5kZWRfYXQgPyAnY29tcGxldGVkJyA6ICdhY3RpdmUnLFxuXHRcdHN0YXJ0ZWRfYXQ6IHJvdy5zdGFydGVkX2F0LFxuXHRcdGVuZGVkX2F0OiByb3cuZW5kZWRfYXQsXG5cdFx0Y3JlYXRlZF9hdDogcm93LnN0YXJ0ZWRfYXQsXG5cdFx0dXBkYXRlZF9hdDogcm93LnVwZGF0ZWRfYXQsXG5cdH1cbn1cblxuZXhwb3J0IGNsYXNzIFNlc3Npb25zUmVwb3NpdG9yeSB7XG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBzdXBhYmFzZTogU3VwYWJhc2VDbGllbnRBbnkgPSBkZWZhdWx0Q2xpZW50KSB7fVxuXG4gICAgYXN5bmMgZmluZEFsbChvcHRpb25zOiBTZXNzaW9uTGlzdE9wdGlvbnMpOiBQcm9taXNlPHtcbiAgICAgICAgc2Vzc2lvbnM6IFNlc3Npb25bXVxuICAgICAgICB0b3RhbDogbnVtYmVyXG4gICAgICAgIHBhZ2U6IG51bWJlclxuICAgICAgICBwYWdlU2l6ZTogbnVtYmVyXG4gICAgICAgIHRvdGFsUGFnZXM6IG51bWJlclxuICAgIH0+IHtcblx0XHRjb25zdCB7XG5cdFx0XHRmaWx0ZXJzID0ge30sXG5cdFx0XHRzb3J0ID0gJ3N0YXJ0ZWRfYXQnLFxuXHRcdFx0ZGlyZWN0aW9uID0gJ2Rlc2MnLFxuXHRcdFx0cGFnZSA9IDEsXG5cdFx0XHRwYWdlU2l6ZSA9IDEwLFxuXHRcdFx0dXNlcklkXG5cdFx0fSA9IG9wdGlvbnNcblxuXHRcdGNvbnN0IHNvcnRDb2x1bW4gPSBbJ3N0YXJ0ZWRfYXQnLCd1cGRhdGVkX2F0JywnZW5kZWRfYXQnXS5pbmNsdWRlcyhzb3J0KSA/IHNvcnQgOiAnc3RhcnRlZF9hdCdcblxuXHRcdGxldCBxdWVyeSA9IHRoaXMuc3VwYWJhc2Vcblx0XHRcdC5mcm9tKCdzZXNzaW9ucycpXG5cdFx0XHQuc2VsZWN0KCdpZCx1c2VyX2lkLHN1YmplY3RfaWQsdGl0bGVfZW5jLHNlc3Npb25fdHlwZSxzdGFydGVkX2F0LGVuZGVkX2F0LHVwZGF0ZWRfYXQnLCB7IGNvdW50OiAnZXN0aW1hdGVkJyB9KVxuXHRcdFx0LmVxKCd1c2VyX2lkJywgdXNlcklkKVxuXG5cdFx0Ly8gQXBwbHkgZmlsdGVyc1xuXHRcdGlmIChmaWx0ZXJzLnNlYXJjaCkge1xuXHRcdFx0cXVlcnkgPSBxdWVyeS5pbGlrZSgndGl0bGVfZW5jJywgYCUke2ZpbHRlcnMuc2VhcmNofSVgKVxuXHRcdH1cblxuXHRcdGlmIChmaWx0ZXJzLnN0YXR1cyAmJiBmaWx0ZXJzLnN0YXR1cyAhPT0gJ2FsbCcpIHtcblx0XHRcdGlmIChmaWx0ZXJzLnN0YXR1cyA9PT0gJ2FjdGl2ZScpIHtcblx0XHRcdFx0cXVlcnkgPSBxdWVyeS5pcygnZW5kZWRfYXQnLCBudWxsKVxuXHRcdFx0fSBlbHNlIGlmIChmaWx0ZXJzLnN0YXR1cyA9PT0gJ2NvbXBsZXRlZCcgfHwgZmlsdGVycy5zdGF0dXMgPT09ICdjYW5jZWxsZWQnKSB7XG5cdFx0XHRcdHF1ZXJ5ID0gcXVlcnkubm90KCdlbmRlZF9hdCcsICdpcycsIG51bGwpXG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKGZpbHRlcnMudHlwZSkge1xuXHRcdFx0cXVlcnkgPSBxdWVyeS5lcSgnc2Vzc2lvbl90eXBlJywgZmlsdGVycy50eXBlKVxuXHRcdH1cblxuXHRcdGlmIChmaWx0ZXJzLmRhdGVGcm9tKSB7XG5cdFx0XHRxdWVyeSA9IHF1ZXJ5Lmd0ZSgnc3RhcnRlZF9hdCcsIGZpbHRlcnMuZGF0ZUZyb20pXG5cdFx0fVxuXG5cdFx0aWYgKGZpbHRlcnMuZGF0ZVRvKSB7XG5cdFx0XHRxdWVyeSA9IHF1ZXJ5Lmx0ZSgnc3RhcnRlZF9hdCcsIGZpbHRlcnMuZGF0ZVRvKVxuXHRcdH1cblxuXHRcdC8vIEFwcGx5IHNvcnRpbmdcblx0XHRxdWVyeSA9IHF1ZXJ5Lm9yZGVyKHNvcnRDb2x1bW4sIHsgYXNjZW5kaW5nOiBkaXJlY3Rpb24gPT09ICdhc2MnIH0pXG5cblx0XHQvLyBBcHBseSBwYWdpbmF0aW9uICgxLWJhc2VkIHRvIDAtYmFzZWQgY29udmVyc2lvbilcblx0XHRjb25zdCBmcm9tID0gKHBhZ2UgLSAxKSAqIHBhZ2VTaXplXG5cdFx0Y29uc3QgdG8gPSBmcm9tICsgcGFnZVNpemUgLSAxXG5cdFx0cXVlcnkgPSBxdWVyeS5yYW5nZShmcm9tLCB0bylcblxuICAgICAgICBjb25zdCB7IGRhdGE6IHJvd3MsIGVycm9yLCBjb3VudCB9ID0gYXdhaXQgcXVlcnlcblxuICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGZldGNoIHNlc3Npb25zOiAke2Vycm9yLm1lc3NhZ2V9YClcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGJhc2VSb3dzID0gcm93cyB8fCBbXVxuXG4gICAgICAgIC8vIEVucmljaCB3aXRoIGNvbnRhY3QgcGhvbmUgdmlhIHN1YmplY3QgbG9va3VwIChwcmVmZXIgY3VzdG9tZXIgb3ZlciBsZWFkKVxuICAgICAgICBjb25zdCBwaG9uZUJ5U3ViamVjdDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHt9XG4gICAgICAgIGNvbnN0IHN1YmplY3RJZHMgPSBBcnJheS5mcm9tKG5ldyBTZXQoXG4gICAgICAgICAgICBiYXNlUm93cy5tYXAoKHI6IGFueSkgPT4gci5zdWJqZWN0X2lkKS5maWx0ZXIoKHY6IGFueSkgPT4gISF2KVxuICAgICAgICApKSBhcyBzdHJpbmdbXVxuXG4gICAgICAgIGlmIChzdWJqZWN0SWRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIC8vIEZldGNoIGN1c3RvbWVyIHBob25lcyBpbiBidWxrXG4gICAgICAgICAgICBjb25zdCB7IGRhdGE6IGN1c3RSb3dzLCBlcnJvcjogY3VzdEVyciB9ID0gYXdhaXQgdGhpcy5zdXBhYmFzZVxuICAgICAgICAgICAgICAgIC5mcm9tKCdjdXN0b21lcnMnKVxuICAgICAgICAgICAgICAgIC5zZWxlY3QoJ3N1YmplY3RfaWQsIHBob25lJylcbiAgICAgICAgICAgICAgICAuaW4oJ3N1YmplY3RfaWQnLCBzdWJqZWN0SWRzKVxuICAgICAgICAgICAgICAgIC5lcSgnb3duZXJfaWQnLCB1c2VySWQpXG4gICAgICAgICAgICBpZiAoIWN1c3RFcnIgJiYgQXJyYXkuaXNBcnJheShjdXN0Um93cykpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHIgb2YgY3VzdFJvd3MpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHIuc3ViamVjdF9pZCAmJiByLnBob25lKSBwaG9uZUJ5U3ViamVjdFtyLnN1YmplY3RfaWRdID0gci5waG9uZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gRmV0Y2ggbGVhZCBwaG9uZXMgd2hlcmUgY3VzdG9tZXIgbWlzc2luZ1xuICAgICAgICAgICAgY29uc3QgbWlzc2luZyA9IHN1YmplY3RJZHMuZmlsdGVyKGlkID0+ICFwaG9uZUJ5U3ViamVjdFtpZF0pXG4gICAgICAgICAgICBpZiAobWlzc2luZy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBkYXRhOiBsZWFkUm93cyB9ID0gYXdhaXQgdGhpcy5zdXBhYmFzZVxuICAgICAgICAgICAgICAgICAgICAuZnJvbSgnbGVhZHMnKVxuICAgICAgICAgICAgICAgICAgICAuc2VsZWN0KCdzdWJqZWN0X2lkLCBwaG9uZScpXG4gICAgICAgICAgICAgICAgICAgIC5pbignc3ViamVjdF9pZCcsIG1pc3NpbmcpXG4gICAgICAgICAgICAgICAgICAgIC5lcSgnb3duZXJfaWQnLCB1c2VySWQpXG4gICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobGVhZFJvd3MpKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgciBvZiBsZWFkUm93cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHIuc3ViamVjdF9pZCAmJiByLnBob25lICYmICFwaG9uZUJ5U3ViamVjdFtyLnN1YmplY3RfaWRdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGhvbmVCeVN1YmplY3Rbci5zdWJqZWN0X2lkXSA9IHIucGhvbmVcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHNlc3Npb25zID0gYmFzZVJvd3MubWFwKChyOiBhbnkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBtYXBEYlNlc3Npb24ocilcbiAgICAgICAgICAgIGNvbnN0IHBob25lID0gci5zdWJqZWN0X2lkID8gcGhvbmVCeVN1YmplY3Rbci5zdWJqZWN0X2lkXSA6IHVuZGVmaW5lZFxuICAgICAgICAgICAgcmV0dXJuIHBob25lID8geyAuLi5zLCBwaG9uZSB9IDogc1xuICAgICAgICB9KVxuICAgICAgICBjb25zdCB0b3RhbCA9IGNvdW50IHx8IDBcbiAgICAgICAgY29uc3QgdG90YWxQYWdlcyA9IE1hdGguY2VpbCh0b3RhbCAvIHBhZ2VTaXplKVxuXG4gICAgICAgIHJldHVybiB7IHNlc3Npb25zLCB0b3RhbCwgcGFnZSwgcGFnZVNpemUsIHRvdGFsUGFnZXMgfVxuICAgIH1cblxuXHRhc3luYyBmaW5kQnlJZChpZDogc3RyaW5nLCB1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8U2Vzc2lvbiB8IG51bGw+IHtcblx0XHRjb25zdCB7IGRhdGE6IHJvdywgZXJyb3IgfSA9IGF3YWl0IHRoaXMuc3VwYWJhc2Vcblx0XHRcdC5mcm9tKCdzZXNzaW9ucycpXG5cdFx0XHQuc2VsZWN0KCdpZCx1c2VyX2lkLHN1YmplY3RfaWQsdGl0bGVfZW5jLHNlc3Npb25fdHlwZSxzdGFydGVkX2F0LGVuZGVkX2F0LHVwZGF0ZWRfYXQnKVxuXHRcdFx0LmVxKCdpZCcsIGlkKVxuXHRcdFx0LmVxKCd1c2VyX2lkJywgdXNlcklkKVxuXHRcdFx0LnNpbmdsZSgpXG5cblx0XHRpZiAoZXJyb3IpIHtcblx0XHRcdGlmICgoZXJyb3IgYXMgYW55KS5jb2RlID09PSAnUEdSU1QxMTYnKSB7XG5cdFx0XHRcdHJldHVybiBudWxsIC8vIE5vdCBmb3VuZFxuXHRcdFx0fVxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZmV0Y2ggc2Vzc2lvbjogJHtlcnJvci5tZXNzYWdlfWApXG5cdFx0fVxuXG5cdFx0cmV0dXJuIG1hcERiU2Vzc2lvbihyb3cpXG5cdH1cblxuXHRhc3luYyBjcmVhdGUoc2Vzc2lvbkRhdGE6IFNlc3Npb25JbnNlcnQsIHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxTZXNzaW9uPiB7XG5cdFx0Y29uc3QgcmVxdWVzdGVkVHlwZSA9IChzZXNzaW9uRGF0YSBhcyBhbnkpPy50eXBlIHx8ICdhc2snXG5cdFx0Y29uc3QgeyBkYXRhOiBuZXdTZXNzaW9uSWQsIGVycm9yOiBycGNFcnJvciB9ID0gYXdhaXQgKHRoaXMuc3VwYWJhc2UgYXMgYW55KVxuXHRcdFx0LnJwYygnZ2V0X29yX2NyZWF0ZV9hY3RpdmVfc2Vzc2lvbicsIHsgcmVxdWVzdGVkX3R5cGU6IHJlcXVlc3RlZFR5cGUgfSlcblxuXHRcdGlmIChycGNFcnJvcikge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gY3JlYXRlIHNlc3Npb246ICR7cnBjRXJyb3IubWVzc2FnZX1gKVxuXHRcdH1cblxuXHRcdGNvbnN0IHsgZGF0YTogcm93LCBlcnJvciB9ID0gYXdhaXQgdGhpcy5zdXBhYmFzZVxuXHRcdFx0LmZyb20oJ3Nlc3Npb25zJylcblx0XHRcdC5zZWxlY3QoJ2lkLHVzZXJfaWQsc3ViamVjdF9pZCx0aXRsZV9lbmMsc2Vzc2lvbl90eXBlLHN0YXJ0ZWRfYXQsZW5kZWRfYXQsdXBkYXRlZF9hdCcpXG5cdFx0XHQuZXEoJ2lkJywgbmV3U2Vzc2lvbklkKVxuXHRcdFx0LmVxKCd1c2VyX2lkJywgdXNlcklkKVxuXHRcdFx0LnNpbmdsZSgpXG5cblx0XHRpZiAoZXJyb3IpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGZldGNoIGNyZWF0ZWQgc2Vzc2lvbjogJHtlcnJvci5tZXNzYWdlfWApXG5cdFx0fVxuXG5cdFx0cmV0dXJuIG1hcERiU2Vzc2lvbihyb3cpXG5cdH1cblxuXHRhc3luYyB1cGRhdGUoaWQ6IHN0cmluZywgc2Vzc2lvbkRhdGE6IFNlc3Npb25VcGRhdGUsIHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxTZXNzaW9uPiB7XG5cdFx0Ly8gU3VwcG9ydCB0aXRsZSB1cGRhdGUgYW5kIGVuZGluZyBhIHNlc3Npb25cblx0XHRpZiAoKHNlc3Npb25EYXRhIGFzIGFueSk/LnN0YXR1cyA9PT0gJ2NvbXBsZXRlZCcgfHwgKHNlc3Npb25EYXRhIGFzIGFueSk/LnN0YXR1cyA9PT0gJ2NhbmNlbGxlZCcpIHtcblx0XHRcdGNvbnN0IHsgZXJyb3I6IGVuZEVyciB9ID0gYXdhaXQgKHRoaXMuc3VwYWJhc2UgYXMgYW55KS5ycGMoJ2VuZF9zZXNzaW9uJywgeyBzZXNzaW9uX2lkOiBpZCB9KVxuXHRcdFx0aWYgKGVuZEVycikgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZW5kIHNlc3Npb246ICR7ZW5kRXJyLm1lc3NhZ2V9YClcblx0XHR9XG5cblx0XHRpZiAoKHNlc3Npb25EYXRhIGFzIGFueSk/LnRpdGxlKSB7XG5cdFx0XHRjb25zdCB7IGVycm9yOiB1cGRFcnIgfSA9IGF3YWl0IHRoaXMuc3VwYWJhc2Vcblx0XHRcdFx0LmZyb20oJ3Nlc3Npb25zJylcblx0XHRcdFx0LnVwZGF0ZSh7IHRpdGxlX2VuYzogKHNlc3Npb25EYXRhIGFzIGFueSkudGl0bGUgfSlcblx0XHRcdFx0LmVxKCdpZCcsIGlkKVxuXHRcdFx0XHQuZXEoJ3VzZXJfaWQnLCB1c2VySWQpXG5cdFx0XHRpZiAodXBkRXJyKSB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byB1cGRhdGUgc2Vzc2lvbjogJHt1cGRFcnIubWVzc2FnZX1gKVxuXHRcdH1cblxuXHRcdGNvbnN0IHsgZGF0YTogcm93LCBlcnJvciB9ID0gYXdhaXQgdGhpcy5zdXBhYmFzZVxuXHRcdFx0LmZyb20oJ3Nlc3Npb25zJylcblx0XHRcdC5zZWxlY3QoJ2lkLHVzZXJfaWQsc3ViamVjdF9pZCx0aXRsZV9lbmMsc2Vzc2lvbl90eXBlLHN0YXJ0ZWRfYXQsZW5kZWRfYXQsdXBkYXRlZF9hdCcpXG5cdFx0XHQuZXEoJ2lkJywgaWQpXG5cdFx0XHQuZXEoJ3VzZXJfaWQnLCB1c2VySWQpXG5cdFx0XHQuc2luZ2xlKClcblx0XHRpZiAoZXJyb3IpIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGZldGNoIHNlc3Npb246ICR7ZXJyb3IubWVzc2FnZX1gKVxuXHRcdHJldHVybiBtYXBEYlNlc3Npb24ocm93KVxuXHR9XG5cblx0YXN5bmMgZGVsZXRlKGlkOiBzdHJpbmcsIHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Y29uc3QgeyBlcnJvciB9ID0gYXdhaXQgdGhpcy5zdXBhYmFzZVxuXHRcdFx0LmZyb20oJ3Nlc3Npb25zJylcblx0XHRcdC5kZWxldGUoKVxuXHRcdFx0LmVxKCdpZCcsIGlkKVxuXHRcdFx0LmVxKCd1c2VyX2lkJywgdXNlcklkKVxuXHRcdGlmIChlcnJvcikgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZGVsZXRlIHNlc3Npb246ICR7ZXJyb3IubWVzc2FnZX1gKVxuXHR9XG5cblx0YXN5bmMgZ2V0U3RhdHModXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPHtcblx0XHR0b3RhbDogbnVtYmVyXG5cdFx0YWN0aXZlOiBudW1iZXJcblx0XHRjb21wbGV0ZWQ6IG51bWJlclxuXHRcdGNhbmNlbGxlZDogbnVtYmVyXG5cdH0+IHtcblx0XHRjb25zdCBbdG90YWwsIGFjdGl2ZSwgY29tcGxldGVkXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcblx0XHRcdHRoaXMuc3VwYWJhc2UuZnJvbSgnc2Vzc2lvbnMnKS5zZWxlY3QoJyonLCB7IGNvdW50OiAnZXhhY3QnLCBoZWFkOiB0cnVlIH0pLmVxKCd1c2VyX2lkJywgdXNlcklkKSxcblx0XHRcdHRoaXMuc3VwYWJhc2UuZnJvbSgnc2Vzc2lvbnMnKS5zZWxlY3QoJyonLCB7IGNvdW50OiAnZXhhY3QnLCBoZWFkOiB0cnVlIH0pLmVxKCd1c2VyX2lkJywgdXNlcklkKS5pcygnZW5kZWRfYXQnLCBudWxsKSxcblx0XHRcdHRoaXMuc3VwYWJhc2UuZnJvbSgnc2Vzc2lvbnMnKS5zZWxlY3QoJyonLCB7IGNvdW50OiAnZXhhY3QnLCBoZWFkOiB0cnVlIH0pLmVxKCd1c2VyX2lkJywgdXNlcklkKS5ub3QoJ2VuZGVkX2F0JywgJ2lzJywgbnVsbCksXG5cdFx0XSlcblxuXHRcdHJldHVybiB7XG5cdFx0XHR0b3RhbDogKHRvdGFsLmNvdW50IGFzIG51bWJlcikgfHwgMCxcblx0XHRcdGFjdGl2ZTogKGFjdGl2ZS5jb3VudCBhcyBudW1iZXIpIHx8IDAsXG5cdFx0XHRjb21wbGV0ZWQ6IChjb21wbGV0ZWQuY291bnQgYXMgbnVtYmVyKSB8fCAwLFxuXHRcdFx0Y2FuY2VsbGVkOiAwLFxuXHRcdH1cblx0fVxufVxuIl0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsInN1cGFiYXNlVXJsIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsInN1cGFiYXNlQW5vbktleSIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIiwiZGVmYXVsdENsaWVudCIsIm1hcERiU2Vzc2lvbiIsInJvdyIsInN0YXJ0ZWRBdCIsInN0YXJ0ZWRfYXQiLCJEYXRlIiwiZmFsbGJhY2tUaXRsZSIsInRvTG9jYWxlVGltZVN0cmluZyIsImhvdXIxMiIsImxvb2tzRW5jb2RlZCIsInRpdGxlX2VuYyIsInRlc3QiLCJpZCIsIm93bmVyX2lkIiwidXNlcl9pZCIsInN1YmplY3RfaWQiLCJ0aXRsZSIsInR5cGUiLCJzZXNzaW9uX3R5cGUiLCJzdGF0dXMiLCJlbmRlZF9hdCIsImNyZWF0ZWRfYXQiLCJ1cGRhdGVkX2F0IiwiU2Vzc2lvbnNSZXBvc2l0b3J5IiwiY29uc3RydWN0b3IiLCJzdXBhYmFzZSIsImZpbmRBbGwiLCJvcHRpb25zIiwiZmlsdGVycyIsInNvcnQiLCJkaXJlY3Rpb24iLCJwYWdlIiwicGFnZVNpemUiLCJ1c2VySWQiLCJzb3J0Q29sdW1uIiwiaW5jbHVkZXMiLCJxdWVyeSIsImZyb20iLCJzZWxlY3QiLCJjb3VudCIsImVxIiwic2VhcmNoIiwiaWxpa2UiLCJpcyIsIm5vdCIsImRhdGVGcm9tIiwiZ3RlIiwiZGF0ZVRvIiwibHRlIiwib3JkZXIiLCJhc2NlbmRpbmciLCJ0byIsInJhbmdlIiwiZGF0YSIsInJvd3MiLCJlcnJvciIsIkVycm9yIiwibWVzc2FnZSIsImJhc2VSb3dzIiwicGhvbmVCeVN1YmplY3QiLCJzdWJqZWN0SWRzIiwiQXJyYXkiLCJTZXQiLCJtYXAiLCJyIiwiZmlsdGVyIiwidiIsImxlbmd0aCIsImN1c3RSb3dzIiwiY3VzdEVyciIsImluIiwiaXNBcnJheSIsInBob25lIiwibWlzc2luZyIsImxlYWRSb3dzIiwic2Vzc2lvbnMiLCJzIiwidW5kZWZpbmVkIiwidG90YWwiLCJ0b3RhbFBhZ2VzIiwiTWF0aCIsImNlaWwiLCJmaW5kQnlJZCIsInNpbmdsZSIsImNvZGUiLCJjcmVhdGUiLCJzZXNzaW9uRGF0YSIsInJlcXVlc3RlZFR5cGUiLCJuZXdTZXNzaW9uSWQiLCJycGNFcnJvciIsInJwYyIsInJlcXVlc3RlZF90eXBlIiwidXBkYXRlIiwiZW5kRXJyIiwic2Vzc2lvbl9pZCIsInVwZEVyciIsImRlbGV0ZSIsImdldFN0YXRzIiwiYWN0aXZlIiwiY29tcGxldGVkIiwiUHJvbWlzZSIsImFsbCIsImhlYWQiLCJjYW5jZWxsZWQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/server/repositories/sessions.ts\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/next@15.2.2_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!*********************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@15.2.2_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \*********************************************************************************************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next@15.2.2_react-dom@19.1.1_react@19.1.1__react@19.1.1","vendor-chunks/tr46@0.0.3","vendor-chunks/@supabase+auth-js@2.71.1","vendor-chunks/@supabase+realtime-js@2.15.5","vendor-chunks/@supabase+postgrest-js@1.21.4","vendor-chunks/@supabase+node-fetch@2.6.15","vendor-chunks/@supabase+storage-js@2.12.1","vendor-chunks/whatwg-url@5.0.0","vendor-chunks/@supabase+ssr@0.7.0_@supabase+supabase-js@2.57.4","vendor-chunks/@supabase+supabase-js@2.57.4","vendor-chunks/cookie@1.0.2","vendor-chunks/@supabase+functions-js@2.4.6","vendor-chunks/webidl-conversions@3.0.1"], () => (__webpack_exec__("(rsc)/./node_modules/.pnpm/next@15.2.2_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fsessions%2F%5Bid%5D%2Froute&page=%2Fapi%2Fsessions%2F%5Bid%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsessions%2F%5Bid%5D%2Froute.ts&appDir=D%3A%5CDelta%20IV%5CSofwares%5Cglass%5Csandbox%5Cshadcn-crm-dashboard%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CDelta%20IV%5CSofwares%5Cglass%5Csandbox%5Cshadcn-crm-dashboard&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();