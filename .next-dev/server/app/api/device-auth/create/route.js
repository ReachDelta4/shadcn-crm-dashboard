/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/device-auth/create/route";
exports.ids = ["app/api/device-auth/create/route"];
exports.modules = {

/***/ "(rsc)/./node_modules/.pnpm/next@15.2.2_@playwright+test@1.57.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fdevice-auth%2Fcreate%2Froute&page=%2Fapi%2Fdevice-auth%2Fcreate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdevice-auth%2Fcreate%2Froute.ts&appDir=D%3A%5CDelta%20IV%5CSofwares%5Cglass%5Csandbox%5Cshadcn-crm-dashboard%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CDelta%20IV%5CSofwares%5Cglass%5Csandbox%5Cshadcn-crm-dashboard&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@15.2.2_@playwright+test@1.57.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fdevice-auth%2Fcreate%2Froute&page=%2Fapi%2Fdevice-auth%2Fcreate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdevice-auth%2Fcreate%2Froute.ts&appDir=D%3A%5CDelta%20IV%5CSofwares%5Cglass%5Csandbox%5Cshadcn-crm-dashboard%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CDelta%20IV%5CSofwares%5Cglass%5Csandbox%5Cshadcn-crm-dashboard&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/.pnpm/next@15.2.2_@playwright+test@1.57.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/.pnpm/next@15.2.2_@playwright+test@1.57.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/.pnpm/next@15.2.2_@playwright+test@1.57.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var D_Delta_IV_Sofwares_glass_sandbox_shadcn_crm_dashboard_src_app_api_device_auth_create_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/device-auth/create/route.ts */ \"(rsc)/./src/app/api/device-auth/create/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/device-auth/create/route\",\n        pathname: \"/api/device-auth/create\",\n        filename: \"route\",\n        bundlePath: \"app/api/device-auth/create/route\"\n    },\n    resolvedPagePath: \"D:\\\\Delta IV\\\\Sofwares\\\\glass\\\\sandbox\\\\shadcn-crm-dashboard\\\\src\\\\app\\\\api\\\\device-auth\\\\create\\\\route.ts\",\n    nextConfigOutput,\n    userland: D_Delta_IV_Sofwares_glass_sandbox_shadcn_crm_dashboard_src_app_api_device_auth_create_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vbmV4dEAxNS4yLjJfQHBsYXl3cmlnaHQrdGVzdEAxLjU3LjBfcmVhY3QtZG9tQDE4LjMuMV9yZWFjdEAxOC4zLjFfX3JlYWN0QDE4LjMuMS9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZkZXZpY2UtYXV0aCUyRmNyZWF0ZSUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGZGV2aWNlLWF1dGglMkZjcmVhdGUlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZkZXZpY2UtYXV0aCUyRmNyZWF0ZSUyRnJvdXRlLnRzJmFwcERpcj1EJTNBJTVDRGVsdGElMjBJViU1Q1NvZndhcmVzJTVDZ2xhc3MlNUNzYW5kYm94JTVDc2hhZGNuLWNybS1kYXNoYm9hcmQlNUNzcmMlNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUQlM0ElNUNEZWx0YSUyMElWJTVDU29md2FyZXMlNUNnbGFzcyU1Q3NhbmRib3glNUNzaGFkY24tY3JtLWRhc2hib2FyZCZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBK0Y7QUFDdkM7QUFDcUI7QUFDMEQ7QUFDdkk7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHlHQUFtQjtBQUMzQztBQUNBLGNBQWMsa0VBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxzREFBc0Q7QUFDOUQ7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDMEY7O0FBRTFGIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkQ6XFxcXERlbHRhIElWXFxcXFNvZndhcmVzXFxcXGdsYXNzXFxcXHNhbmRib3hcXFxcc2hhZGNuLWNybS1kYXNoYm9hcmRcXFxcc3JjXFxcXGFwcFxcXFxhcGlcXFxcZGV2aWNlLWF1dGhcXFxcY3JlYXRlXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9kZXZpY2UtYXV0aC9jcmVhdGUvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9kZXZpY2UtYXV0aC9jcmVhdGVcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2RldmljZS1hdXRoL2NyZWF0ZS9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkQ6XFxcXERlbHRhIElWXFxcXFNvZndhcmVzXFxcXGdsYXNzXFxcXHNhbmRib3hcXFxcc2hhZGNuLWNybS1kYXNoYm9hcmRcXFxcc3JjXFxcXGFwcFxcXFxhcGlcXFxcZGV2aWNlLWF1dGhcXFxcY3JlYXRlXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgd29ya0FzeW5jU3RvcmFnZSxcbiAgICAgICAgd29ya1VuaXRBc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/next@15.2.2_@playwright+test@1.57.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fdevice-auth%2Fcreate%2Froute&page=%2Fapi%2Fdevice-auth%2Fcreate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdevice-auth%2Fcreate%2Froute.ts&appDir=D%3A%5CDelta%20IV%5CSofwares%5Cglass%5Csandbox%5Cshadcn-crm-dashboard%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CDelta%20IV%5CSofwares%5Cglass%5Csandbox%5Cshadcn-crm-dashboard&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/next@15.2.2_@playwright+test@1.57.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!*********************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@15.2.2_@playwright+test@1.57.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \*********************************************************************************************************************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./src/app/api/device-auth/create/route.ts":
/*!*************************************************!*\
  !*** ./src/app/api/device-auth/create/route.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   runtime: () => (/* binding */ runtime)\n/* harmony export */ });\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/.pnpm/next@15.2.2_@playwright+test@1.57.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/api/headers.js\");\n/* harmony import */ var _supabase_ssr__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @supabase/ssr */ \"@supabase/ssr\");\n/* harmony import */ var _supabase_ssr__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_supabase_ssr__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _server_supabase__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/server/supabase */ \"(rsc)/./src/server/supabase.ts\");\n/* harmony import */ var _server_crypto__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/server/crypto */ \"(rsc)/./src/server/crypto.ts\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_4__);\nconst runtime = 'nodejs';\n\n\n\n\n\nconst TTL_SECONDS = 60;\nconst RATE_LIMIT_WINDOW_MS = 60000;\nconst RATE_LIMIT_MAX = 10;\nconst memoryRateLimiter = new Map();\nfunction rateLimit(key) {\n    const now = Date.now();\n    const entry = memoryRateLimiter.get(key);\n    if (!entry || now > entry.resetAt) {\n        memoryRateLimiter.set(key, {\n            count: 1,\n            resetAt: now + RATE_LIMIT_WINDOW_MS\n        });\n        return;\n    }\n    entry.count += 1;\n    if (entry.count > RATE_LIMIT_MAX) throw new Error('Rate limited');\n}\nasync function POST() {\n    try {\n        console.log('=== DEVICE AUTH CREATE START ===');\n        console.log('ENV CHECK:');\n        console.log('- SUPABASE_URL:',  true ? 'SET' : 0);\n        console.log('- SUPABASE_ANON_KEY:',  true ? 'SET' : 0);\n        console.log('- SUPABASE_SERVICE_ROLE_KEY:', process.env.SUPABASE_SERVICE_ROLE_KEY ? 'SET' : 'MISSING');\n        console.log('- DEVICE_CODE_ENC_KEY:', process.env.DEVICE_CODE_ENC_KEY ? 'SET' : 'MISSING');\n        console.log('- supabaseAdmin:', _server_supabase__WEBPACK_IMPORTED_MODULE_2__.supabaseAdmin ? 'INITIALIZED' : 'NULL');\n        if (!_server_supabase__WEBPACK_IMPORTED_MODULE_2__.supabaseAdmin) {\n            console.log('ERROR: supabaseAdmin is null - service role not configured');\n            return new Response('Service role not configured', {\n                status: 500\n            });\n        }\n        console.log('Getting cookies and headers...');\n        const cookieStore = await (0,next_headers__WEBPACK_IMPORTED_MODULE_0__.cookies)();\n        const hdrs = await (0,next_headers__WEBPACK_IMPORTED_MODULE_0__.headers)();\n        const url = \"https://hewpwluinbwaizwqhmjc.supabase.co\";\n        const anon = \"sb_publishable_F1bepvhJ6cGvjDNRfj_QfA_ZcNq0USi\";\n        console.log('Creating server client...');\n        const supabase = (0,_supabase_ssr__WEBPACK_IMPORTED_MODULE_1__.createServerClient)(url, anon, {\n            cookies: {\n                get (name) {\n                    return cookieStore.get(name)?.value;\n                },\n                set (name, value, options) {\n                    cookieStore.set(name, value, options);\n                },\n                remove (name, options) {\n                    cookieStore.set(name, '', {\n                        ...options,\n                        maxAge: 0\n                    });\n                }\n            }\n        });\n        console.log('Getting user from session...');\n        const { data: { user }, error } = await supabase.auth.getUser();\n        if (error) {\n            console.log('Auth error:', error);\n            return new Response('Unauthorized', {\n                status: 401\n            });\n        }\n        if (!user) {\n            console.log('No user in session');\n            return new Response('Unauthorized', {\n                status: 401\n            });\n        }\n        console.log('User found:', user.id);\n        // Rate limit by user id and IP\n        const ip = (hdrs.get('x-forwarded-for') || '').split(',')[0].trim();\n        const ua = hdrs.get('user-agent') || '';\n        console.log('Rate limiting for user:', user.id, 'IP:', ip);\n        try {\n            rateLimit(user.id);\n            if (ip) rateLimit(`ip:${ip}`);\n        } catch  {\n            console.log('Rate limited');\n            return new Response('Too Many Requests', {\n                status: 429\n            });\n        }\n        // Get current session tokens from cookies\n        console.log('Getting session tokens...');\n        const { data: sessionData } = await supabase.auth.getSession();\n        const tokens = sessionData?.session;\n        if (!tokens?.access_token || !tokens?.refresh_token) {\n            console.log('No tokens in session');\n            return new Response('No session', {\n                status: 400\n            });\n        }\n        console.log('Tokens found');\n        console.log('Generating code and encrypting tokens...');\n        const code = cryptoRandom();\n        const now = new Date();\n        const expiresAt = new Date(now.getTime() + TTL_SECONDS * 1000);\n        try {\n            const accessTokenEnc = (0,_server_crypto__WEBPACK_IMPORTED_MODULE_3__.encrypt)(tokens.access_token);\n            const refreshTokenEnc = (0,_server_crypto__WEBPACK_IMPORTED_MODULE_3__.encrypt)(tokens.refresh_token);\n            console.log('Encryption successful');\n            console.log('Upserting to database...');\n            const { error: upsertError } = await _server_supabase__WEBPACK_IMPORTED_MODULE_2__.supabaseAdmin.from('device_auth_codes').upsert({\n                code,\n                user_id: user.id,\n                access_token_enc: accessTokenEnc,\n                refresh_token_enc: refreshTokenEnc,\n                created_at: now.toISOString(),\n                expires_at: expiresAt.toISOString(),\n                client_ip: ip,\n                user_agent: ua\n            }, {\n                onConflict: 'code'\n            });\n            if (upsertError) {\n                console.log('Database upsert error:', upsertError);\n                return new Response('Create failed', {\n                    status: 500\n                });\n            }\n            console.log('Database upsert successful');\n            console.log('=== CREATE ROUTE SUCCESS ===');\n            return new Response(JSON.stringify({\n                code,\n                expires_in: TTL_SECONDS\n            }), {\n                status: 200,\n                headers: {\n                    'Content-Type': 'application/json'\n                }\n            });\n        } catch (encError) {\n            console.log('Encryption or database error:', encError);\n            throw encError;\n        }\n    } catch (e) {\n        console.error('device-auth/create error:', e);\n        return new Response('Server error', {\n            status: 500\n        });\n    }\n}\nfunction cryptoRandom() {\n    const buf = crypto__WEBPACK_IMPORTED_MODULE_4___default().randomBytes(20);\n    return buf.toString('base64').replace(/\\+/g, '-').replace(/\\//g, '_').replace(/=+$/, '');\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9kZXZpY2UtYXV0aC9jcmVhdGUvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQU8sTUFBTUEsVUFBVSxTQUFRO0FBRWdCO0FBQ0c7QUFDRDtBQUNSO0FBQ2Q7QUFFM0IsTUFBTU8sY0FBYztBQUNwQixNQUFNQyx1QkFBdUI7QUFDN0IsTUFBTUMsaUJBQWlCO0FBRXZCLE1BQU1DLG9CQUFvQixJQUFJQztBQUU5QixTQUFTQyxVQUFVQyxHQUFXO0lBQzVCLE1BQU1DLE1BQU1DLEtBQUtELEdBQUc7SUFDcEIsTUFBTUUsUUFBUU4sa0JBQWtCTyxHQUFHLENBQUNKO0lBQ3BDLElBQUksQ0FBQ0csU0FBU0YsTUFBTUUsTUFBTUUsT0FBTyxFQUFFO1FBQ2pDUixrQkFBa0JTLEdBQUcsQ0FBQ04sS0FBSztZQUFFTyxPQUFPO1lBQUdGLFNBQVNKLE1BQU1OO1FBQXFCO1FBQzNFO0lBQ0Y7SUFDQVEsTUFBTUksS0FBSyxJQUFJO0lBQ2YsSUFBSUosTUFBTUksS0FBSyxHQUFHWCxnQkFBZ0IsTUFBTSxJQUFJWSxNQUFNO0FBQ3BEO0FBRU8sZUFBZUM7SUFDcEIsSUFBSTtRQUNGQyxRQUFRQyxHQUFHLENBQUM7UUFDWkQsUUFBUUMsR0FBRyxDQUFDO1FBQ1pELFFBQVFDLEdBQUcsQ0FBQyxtQkFBbUJDLEtBQW9DLEdBQUcsUUFBUSxDQUFTO1FBQ3ZGRixRQUFRQyxHQUFHLENBQUMsd0JBQXdCQyxLQUF5QyxHQUFHLFFBQVEsQ0FBUztRQUNqR0YsUUFBUUMsR0FBRyxDQUFDLGdDQUFnQ0MsUUFBUUMsR0FBRyxDQUFDRyx5QkFBeUIsR0FBRyxRQUFRO1FBQzVGTixRQUFRQyxHQUFHLENBQUMsMEJBQTBCQyxRQUFRQyxHQUFHLENBQUNJLG1CQUFtQixHQUFHLFFBQVE7UUFDaEZQLFFBQVFDLEdBQUcsQ0FBQyxvQkFBb0JwQiwyREFBYUEsR0FBRyxnQkFBZ0I7UUFFaEUsSUFBSSxDQUFDQSwyREFBYUEsRUFBRTtZQUNsQm1CLFFB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XGdsYXNzXFxzYW5kYm94XFxzaGFkY24tY3JtLWRhc2hib2FyZFxcc3JjXFxhcHBcXGFwaVxcZGV2aWNlLWF1dGhcXGNyZWF0ZVxccm91dGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IHJ1bnRpbWUgPSAnbm9kZWpzJ1xyXG5cclxuaW1wb3J0IHsgY29va2llcywgaGVhZGVycyB9IGZyb20gJ25leHQvaGVhZGVycydcclxuaW1wb3J0IHsgY3JlYXRlU2VydmVyQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3NzcidcclxuaW1wb3J0IHsgc3VwYWJhc2VBZG1pbiB9IGZyb20gJ0Avc2VydmVyL3N1cGFiYXNlJ1xyXG5pbXBvcnQgeyBlbmNyeXB0IH0gZnJvbSAnQC9zZXJ2ZXIvY3J5cHRvJ1xyXG5pbXBvcnQgY3J5cHRvIGZyb20gJ2NyeXB0bydcclxuXHJcbmNvbnN0IFRUTF9TRUNPTkRTID0gNjBcclxuY29uc3QgUkFURV9MSU1JVF9XSU5ET1dfTVMgPSA2MF8wMDBcclxuY29uc3QgUkFURV9MSU1JVF9NQVggPSAxMFxyXG5cclxuY29uc3QgbWVtb3J5UmF0ZUxpbWl0ZXIgPSBuZXcgTWFwPHN0cmluZywgeyBjb3VudDogbnVtYmVyOyByZXNldEF0OiBudW1iZXIgfT4oKVxyXG5cclxuZnVuY3Rpb24gcmF0ZUxpbWl0KGtleTogc3RyaW5nKSB7XHJcbiAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKVxyXG4gIGNvbnN0IGVudHJ5ID0gbWVtb3J5UmF0ZUxpbWl0ZXIuZ2V0KGtleSlcclxuICBpZiAoIWVudHJ5IHx8IG5vdyA+IGVudHJ5LnJlc2V0QXQpIHtcclxuICAgIG1lbW9yeVJhdGVMaW1pdGVyLnNldChrZXksIHsgY291bnQ6IDEsIHJlc2V0QXQ6IG5vdyArIFJBVEVfTElNSVRfV0lORE9XX01TIH0pXHJcbiAgICByZXR1cm5cclxuICB9XHJcbiAgZW50cnkuY291bnQgKz0gMVxyXG4gIGlmIChlbnRyeS5jb3VudCA+IFJBVEVfTElNSVRfTUFYKSB0aHJvdyBuZXcgRXJyb3IoJ1JhdGUgbGltaXRlZCcpXHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKCkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zb2xlLmxvZygnPT09IERFVklDRSBBVVRIIENSRUFURSBTVEFSVCA9PT0nKVxyXG4gICAgY29uc29sZS5sb2coJ0VOViBDSEVDSzonKVxyXG4gICAgY29uc29sZS5sb2coJy0gU1VQQUJBU0VfVVJMOicsIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCA/ICdTRVQnIDogJ01JU1NJTkcnKVxyXG4gICAgY29uc29sZS5sb2coJy0gU1VQQUJBU0VfQU5PTl9LRVk6JywgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkgPyAnU0VUJyA6ICdNSVNTSU5HJykgXHJcbiAgICBjb25zb2xlLmxvZygnLSBTVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZOicsIHByb2Nlc3MuZW52LlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkgPyAnU0VUJyA6ICdNSVNTSU5HJylcclxuICAgIGNvbnNvbGUubG9nKCctIERFVklDRV9DT0RFX0VOQ19LRVk6JywgcHJvY2Vzcy5lbnYuREVWSUNFX0NPREVfRU5DX0tFWSA/ICdTRVQnIDogJ01JU1NJTkcnKVxyXG4gICAgY29uc29sZS5sb2coJy0gc3VwYWJhc2VBZG1pbjonLCBzdXBhYmFzZUFkbWluID8gJ0lOSVRJQUxJWkVEJyA6ICdOVUxMJylcclxuXHJcbiAgICBpZiAoIXN1cGFiYXNlQWRtaW4pIHtcclxuICAgICAgY29uc29sZS5sb2coJ0VSUk9SOiBzdXBhYmFzZUFkbWluIGlzIG51bGwgLSBzZXJ2aWNlIHJvbGUgbm90IGNvbmZpZ3VyZWQnKVxyXG4gICAgICByZXR1cm4gbmV3IFJlc3BvbnNlKCdTZXJ2aWNlIHJvbGUgbm90IGNvbmZpZ3VyZWQnLCB7IHN0YXR1czogNTAwIH0pXHJcbiAgICB9XHJcblxyXG4gICAgY29uc29sZS5sb2coJ0dldHRpbmcgY29va2llcyBhbmQgaGVhZGVycy4uLicpXHJcbiAgICBjb25zdCBjb29raWVTdG9yZSA9IGF3YWl0IGNvb2tpZXMoKVxyXG4gICAgY29uc3QgaGRycyA9IGF3YWl0IGhlYWRlcnMoKVxyXG4gICAgY29uc3QgdXJsID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIVxyXG4gICAgY29uc3QgYW5vbiA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIVxyXG5cclxuICAgIGNvbnNvbGUubG9nKCdDcmVhdGluZyBzZXJ2ZXIgY2xpZW50Li4uJylcclxuICAgIGNvbnN0IHN1cGFiYXNlID0gY3JlYXRlU2VydmVyQ2xpZW50KHVybCwgYW5vbiwge1xyXG4gICAgICBjb29raWVzOiB7XHJcbiAgICAgICAgZ2V0KG5hbWU6IHN0cmluZykgeyByZXR1cm4gY29va2llU3RvcmUuZ2V0KG5hbWUpPy52YWx1ZSB9LFxyXG4gICAgICAgIHNldChuYW1lOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcsIG9wdGlvbnM6IGFueSkgeyBjb29raWVTdG9yZS5zZXQobmFtZSwgdmFsdWUsIG9wdGlvbnMpIH0sXHJcbiAgICAgICAgcmVtb3ZlKG5hbWU6IHN0cmluZywgb3B0aW9uczogYW55KSB7IGNvb2tpZVN0b3JlLnNldChuYW1lLCAnJywgeyAuLi5vcHRpb25zLCBtYXhBZ2U6IDAgfSkgfSxcclxuICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICBjb25zb2xlLmxvZygnR2V0dGluZyB1c2VyIGZyb20gc2Vzc2lvbi4uLicpXHJcbiAgICBjb25zdCB7IGRhdGE6IHsgdXNlciB9LCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UuYXV0aC5nZXRVc2VyKClcclxuICAgIGlmIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmxvZygnQXV0aCBlcnJvcjonLCBlcnJvcilcclxuICAgICAgcmV0dXJuIG5ldyBSZXNwb25zZSgnVW5hdXRob3JpemVkJywgeyBzdGF0dXM6IDQwMSB9KVxyXG4gICAgfVxyXG4gICAgaWYgKCF1c2VyKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdObyB1c2VyIGluIHNlc3Npb24nKVxyXG4gICAgICByZXR1cm4gbmV3IFJlc3BvbnNlKCdVbmF1dGhvcml6ZWQnLCB7IHN0YXR1czogNDAxIH0pXHJcbiAgICB9XHJcbiAgICBjb25zb2xlLmxvZygnVXNlciBmb3VuZDonLCB1c2VyLmlkKVxyXG5cclxuICAgIC8vIFJhdGUgbGltaXQgYnkgdXNlciBpZCBhbmQgSVBcclxuICAgIGNvbnN0IGlwID0gKGhkcnMuZ2V0KCd4LWZvcndhcmRlZC1mb3InKSB8fCAnJykuc3BsaXQoJywnKVswXS50cmltKClcclxuICAgIGNvbnN0IHVhID0gaGRycy5nZXQoJ3VzZXItYWdlbnQnKSB8fCAnJ1xyXG4gICAgY29uc29sZS5sb2coJ1JhdGUgbGltaXRpbmcgZm9yIHVzZXI6JywgdXNlci5pZCwgJ0lQOicsIGlwKVxyXG4gICAgdHJ5IHsgXHJcbiAgICAgIHJhdGVMaW1pdCh1c2VyLmlkKTsgXHJcbiAgICAgIGlmIChpcCkgcmF0ZUxpbWl0KGBpcDoke2lwfWApIFxyXG4gICAgfSBjYXRjaCB7IFxyXG4gICAgICBjb25zb2xlLmxvZygnUmF0ZSBsaW1pdGVkJylcclxuICAgICAgcmV0dXJuIG5ldyBSZXNwb25zZSgnVG9vIE1hbnkgUmVxdWVzdHMnLCB7IHN0YXR1czogNDI5IH0pIFxyXG4gICAgfVxyXG5cclxuICAgIC8vIEdldCBjdXJyZW50IHNlc3Npb24gdG9rZW5zIGZyb20gY29va2llc1xyXG4gICAgY29uc29sZS5sb2coJ0dldHRpbmcgc2Vzc2lvbiB0b2tlbnMuLi4nKVxyXG4gICAgY29uc3QgeyBkYXRhOiBzZXNzaW9uRGF0YSB9ID0gYXdhaXQgc3VwYWJhc2UuYXV0aC5nZXRTZXNzaW9uKClcclxuICAgIGNvbnN0IHRva2VucyA9IHNlc3Npb25EYXRhPy5zZXNzaW9uXHJcbiAgICBpZiAoIXRva2Vucz8uYWNjZXNzX3Rva2VuIHx8ICF0b2tlbnM/LnJlZnJlc2hfdG9rZW4pIHtcclxuICAgICAgY29uc29sZS5sb2coJ05vIHRva2VucyBpbiBzZXNzaW9uJylcclxuICAgICAgcmV0dXJuIG5ldyBSZXNwb25zZSgnTm8gc2Vzc2lvbicsIHsgc3RhdHVzOiA0MDAgfSlcclxuICAgIH1cclxuICAgIGNvbnNvbGUubG9nKCdUb2tlbnMgZm91bmQnKVxyXG5cclxuICAgIGNvbnNvbGUubG9nKCdHZW5lcmF0aW5nIGNvZGUgYW5kIGVuY3J5cHRpbmcgdG9rZW5zLi4uJylcclxuICAgIGNvbnN0IGNvZGUgPSBjcnlwdG9SYW5kb20oKVxyXG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKVxyXG4gICAgY29uc3QgZXhwaXJlc0F0ID0gbmV3IERhdGUobm93LmdldFRpbWUoKSArIFRUTF9TRUNPTkRTICogMTAwMClcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBhY2Nlc3NUb2tlbkVuYyA9IGVuY3J5cHQodG9rZW5zLmFjY2Vzc190b2tlbilcclxuICAgICAgY29uc3QgcmVmcmVzaFRva2VuRW5jID0gZW5jcnlwdCh0b2tlbnMucmVmcmVzaF90b2tlbilcclxuICAgICAgY29uc29sZS5sb2coJ0VuY3J5cHRpb24gc3VjY2Vzc2Z1bCcpXHJcblxyXG4gICAgICBjb25zb2xlLmxvZygnVXBzZXJ0aW5nIHRvIGRhdGFiYXNlLi4uJylcclxuICAgICAgY29uc3QgeyBlcnJvcjogdXBzZXJ0RXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW4uZnJvbSgnZGV2aWNlX2F1dGhfY29kZXMnKS51cHNlcnQoe1xyXG4gICAgICAgIGNvZGUsXHJcbiAgICAgICAgdXNlcl9pZDogdXNlci5pZCxcclxuICAgICAgICBhY2Nlc3NfdG9rZW5fZW5jOiBhY2Nlc3NUb2tlbkVuYyxcclxuICAgICAgICByZWZyZXNoX3Rva2VuX2VuYzogcmVmcmVzaFRva2VuRW5jLFxyXG4gICAgICAgIGNyZWF0ZWRfYXQ6IG5vdy50b0lTT1N0cmluZygpLFxyXG4gICAgICAgIGV4cGlyZXNfYXQ6IGV4cGlyZXNBdC50b0lTT1N0cmluZygpLFxyXG4gICAgICAgIGNsaWVudF9pcDogaXAsXHJcbiAgICAgICAgdXNlcl9hZ2VudDogdWFcclxuICAgICAgfSwgeyBvbkNvbmZsaWN0OiAnY29kZScgfSlcclxuICAgICAgXHJcbiAgICAgIGlmICh1cHNlcnRFcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdEYXRhYmFzZSB1cHNlcnQgZXJyb3I6JywgdXBzZXJ0RXJyb3IpXHJcbiAgICAgICAgcmV0dXJuIG5ldyBSZXNwb25zZSgnQ3JlYXRlIGZhaWxlZCcsIHsgc3RhdHVzOiA1MDAgfSlcclxuICAgICAgfVxyXG4gICAgICBjb25zb2xlLmxvZygnRGF0YWJhc2UgdXBzZXJ0IHN1Y2Nlc3NmdWwnKVxyXG5cclxuICAgICAgY29uc29sZS5sb2coJz09PSBDUkVBVEUgUk9VVEUgU1VDQ0VTUyA9PT0nKVxyXG4gICAgICByZXR1cm4gbmV3IFJlc3BvbnNlKEpTT04uc3RyaW5naWZ5KHsgY29kZSwgZXhwaXJlc19pbjogVFRMX1NFQ09ORFMgfSksIHsgXHJcbiAgICAgICAgc3RhdHVzOiAyMDAsIFxyXG4gICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9IFxyXG4gICAgICB9KVxyXG4gICAgfSBjYXRjaCAoZW5jRXJyb3IpIHtcclxuICAgICAgY29uc29sZS5sb2coJ0VuY3J5cHRpb24gb3IgZGF0YWJhc2UgZXJyb3I6JywgZW5jRXJyb3IpXHJcbiAgICAgIHRocm93IGVuY0Vycm9yXHJcbiAgICB9XHJcbiAgfSBjYXRjaCAoZSkge1xyXG4gICAgY29uc29sZS5lcnJvcignZGV2aWNlLWF1dGgvY3JlYXRlIGVycm9yOicsIGUpXHJcbiAgICByZXR1cm4gbmV3IFJlc3BvbnNlKCdTZXJ2ZXIgZXJyb3InLCB7IHN0YXR1czogNTAwIH0pXHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBjcnlwdG9SYW5kb20oKTogc3RyaW5nIHtcclxuICBjb25zdCBidWYgPSBjcnlwdG8ucmFuZG9tQnl0ZXMoMjApXHJcbiAgcmV0dXJuIGJ1Zi50b1N0cmluZygnYmFzZTY0JykucmVwbGFjZSgvXFwrL2csICctJykucmVwbGFjZSgvXFwvL2csICdfJykucmVwbGFjZSgvPSskLywgJycpXHJcbn1cclxuIl0sIm5hbWVzIjpbInJ1bnRpbWUiLCJjb29raWVzIiwiaGVhZGVycyIsImNyZWF0ZVNlcnZlckNsaWVudCIsInN1cGFiYXNlQWRtaW4iLCJlbmNyeXB0IiwiY3J5cHRvIiwiVFRMX1NFQ09ORFMiLCJSQVRFX0xJTUlUX1dJTkRPV19NUyIsIlJBVEVfTElNSVRfTUFYIiwibWVtb3J5UmF0ZUxpbWl0ZXIiLCJNYXAiLCJyYXRlTGltaXQiLCJrZXkiLCJub3ciLCJEYXRlIiwiZW50cnkiLCJnZXQiLCJyZXNldEF0Iiwic2V0IiwiY291bnQiLCJFcnJvciIsIlBPU1QiLCJjb25zb2xlIiwibG9nIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIiwiU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSIsIkRFVklDRV9DT0RFX0VOQ19LRVkiLCJSZXNwb25zZSIsInN0YXR1cyIsImNvb2tpZVN0b3JlIiwiaGRycyIsInVybCIsImFub24iLCJzdXBhYmFzZSIsIm5hbWUiLCJ2YWx1ZSIsIm9wdGlvbnMiLCJyZW1vdmUiLCJtYXhBZ2UiLCJkYXRhIiwidXNlciIsImVycm9yIiwiYXV0aCIsImdldFVzZXIiLCJpZCIsImlwIiwic3BsaXQiLCJ0cmltIiwidWEiLCJzZXNzaW9uRGF0YSIsImdldFNlc3Npb24iLCJ0b2tlbnMiLCJzZXNzaW9uIiwiYWNjZXNzX3Rva2VuIiwicmVmcmVzaF90b2tlbiIsImNvZGUiLCJjcnlwdG9SYW5kb20iLCJleHBpcmVzQXQiLCJnZXRUaW1lIiwiYWNjZXNzVG9rZW5FbmMiLCJyZWZyZXNoVG9rZW5FbmMiLCJ1cHNlcnRFcnJvciIsImZyb20iLCJ1cHNlcnQiLCJ1c2VyX2lkIiwiYWNjZXNzX3Rva2VuX2VuYyIsInJlZnJlc2hfdG9rZW5fZW5jIiwiY3JlYXRlZF9hdCIsInRvSVNPU3RyaW5nIiwiZXhwaXJlc19hdCIsImNsaWVudF9pcCIsInVzZXJfYWdlbnQiLCJvbkNvbmZsaWN0IiwiSlNPTiIsInN0cmluZ2lmeSIsImV4cGlyZXNfaW4iLCJlbmNFcnJvciIsImUiLCJidWYiLCJyYW5kb21CeXRlcyIsInRvU3RyaW5nIiwicmVwbGFjZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/device-auth/create/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/server/crypto.ts":
/*!******************************!*\
  !*** ./src/server/crypto.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   decrypt: () => (/* binding */ decrypt),\n/* harmony export */   encrypt: () => (/* binding */ encrypt)\n/* harmony export */ });\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_0__);\n\nfunction getKey() {\n    const raw = process.env.DEVICE_CODE_ENC_KEY || '';\n    if (!raw) throw new Error('DEVICE_CODE_ENC_KEY is not set');\n    // Accept 32-byte base64 or hex; otherwise derive via sha256\n    try {\n        if (raw.length === 44 && raw.endsWith('=')) return Buffer.from(raw, 'base64');\n        if (raw.length === 64) return Buffer.from(raw, 'hex');\n    } catch  {}\n    return crypto__WEBPACK_IMPORTED_MODULE_0___default().createHash('sha256').update(raw).digest();\n}\nfunction encrypt(plaintext) {\n    const key = getKey();\n    const iv = crypto__WEBPACK_IMPORTED_MODULE_0___default().randomBytes(12);\n    const cipher = crypto__WEBPACK_IMPORTED_MODULE_0___default().createCipheriv('aes-256-gcm', key, iv);\n    const enc = Buffer.concat([\n        cipher.update(plaintext, 'utf8'),\n        cipher.final()\n    ]);\n    const tag = cipher.getAuthTag();\n    return `${iv.toString('base64')}:${tag.toString('base64')}:${enc.toString('base64')}`;\n}\nfunction decrypt(packed) {\n    const key = getKey();\n    const [ivB64, tagB64, dataB64] = (packed || '').split(':');\n    if (!ivB64 || !tagB64 || !dataB64) throw new Error('Malformed ciphertext');\n    const iv = Buffer.from(ivB64, 'base64');\n    const tag = Buffer.from(tagB64, 'base64');\n    const data = Buffer.from(dataB64, 'base64');\n    const decipher = crypto__WEBPACK_IMPORTED_MODULE_0___default().createDecipheriv('aes-256-gcm', key, iv);\n    decipher.setAuthTag(tag);\n    const dec = Buffer.concat([\n        decipher.update(data),\n        decipher.final()\n    ]);\n    return dec.toString('utf8');\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvc2VydmVyL2NyeXB0by50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQTJCO0FBRTNCLFNBQVNDO0lBQ1AsTUFBTUMsTUFBTUMsUUFBUUMsR0FBRyxDQUFDQyxtQkFBbUIsSUFBSTtJQUMvQyxJQUFJLENBQUNILEtBQUssTUFBTSxJQUFJSSxNQUFNO0lBQzFCLDREQUE0RDtJQUM1RCxJQUFJO1FBQ0YsSUFBSUosSUFBSUssTUFBTSxLQUFLLE1BQU1MLElBQUlNLFFBQVEsQ0FBQyxNQUFNLE9BQU9DLE9BQU9DLElBQUksQ0FBQ1IsS0FBSztRQUNwRSxJQUFJQSxJQUFJSyxNQUFNLEtBQUssSUFBSSxPQUFPRSxPQUFPQyxJQUFJLENBQUNSLEtBQUs7SUFDakQsRUFBRSxPQUFNLENBQUM7SUFDVCxPQUFPRix3REFBaUIsQ0FBQyxVQUFVWSxNQUFNLENBQUNWLEtBQUtXLE1BQU07QUFDdkQ7QUFFTyxTQUFTQyxRQUFRQyxTQUFpQjtJQUN2QyxNQUFNQyxNQUFNZjtJQUNaLE1BQU1nQixLQUFLakIseURBQWtCLENBQUM7SUFDOUIsTUFBTW1CLFNBQVNuQiw0REFBcUIsQ0FBQyxlQUFlZ0IsS0FBS0M7SUFDekQsTUFBTUksTUFBTVosT0FBT2EsTUFBTSxDQUFDO1FBQUNILE9BQU9QLE1BQU0sQ0FBQ0csV0FBVztRQUFTSSxPQUFPSSxLQUFLO0tBQUc7SUFDNUUsTUFBTUMsTUFBTUwsT0FBT00sVUFBVTtJQUM3QixPQUFPLEdBQUdSLEdBQUdTLFFBQVEsQ0FBQyxVQUFVLENBQUMsRUFBRUYsSUFBSUUsUUFBUSxDQUFDLFVBQVUsQ0FBQyxFQUFFTCxJQUFJSyxRQUFRLENBQUMsV0FBVztBQUN2RjtBQUVPLFNBQVNDLFFBQVFDLE1BQWM7SUFDcEMsTUFBTVosTUFBTWY7SUFDWixNQUFNLENBQUM0QixPQUFPQyxRQUFRQyxRQUFRLEdBQUcsQ0FBQ0gsVUFBVSxFQUFDLEVBQUdJLEtBQUssQ0FBQztJQUN0RCxJQUFJLENBQUNILFNBQVMsQ0FBQ0MsVUFBVSxDQUFDQyxTQUFTLE1BQU0sSUFBSXpCLE1BQU07SUFDbkQsTUFBTVcsS0FBS1IsT0FBT0MsSUFBSSxDQUFDbUIsT0FBTztJQUM5QixNQUFNTCxNQUFNZixPQUFPQyxJQUFJLENBQUNvQixRQUFRO0lBQ2hDLE1BQU1HLE9BQU94QixPQUFPQyxJQUFJLENBQUNxQixTQUFTO0lBQ2xDLE1BQU1HLFdBQVdsQyw4REFBdUIsQ0FBQyxlQUFlZ0IsS0FBS0M7SUFDN0RpQixTQUFTRSxVQUFVLENBQUNaO0lBQ3BCLE1BQU1hLE1BQU01QixPQUFPYSxNQUFNLENBQUM7UUFBQ1ksU0FBU3RCLE1BQU0sQ0FBQ3FCO1FBQU9DLFNBQVNYLEtBQUs7S0FBRztJQUNuRSxPQUFPYyxJQUFJWCxRQUFRLENBQUM7QUFDdEIiLCJzb3VyY2VzIjpbIkQ6XFxEZWx0YSBJVlxcU29md2FyZXNcXGdsYXNzXFxzYW5kYm94XFxzaGFkY24tY3JtLWRhc2hib2FyZFxcc3JjXFxzZXJ2ZXJcXGNyeXB0by50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY3J5cHRvIGZyb20gJ2NyeXB0bydcclxuXHJcbmZ1bmN0aW9uIGdldEtleSgpOiBCdWZmZXIge1xyXG4gIGNvbnN0IHJhdyA9IHByb2Nlc3MuZW52LkRFVklDRV9DT0RFX0VOQ19LRVkgfHwgJydcclxuICBpZiAoIXJhdykgdGhyb3cgbmV3IEVycm9yKCdERVZJQ0VfQ09ERV9FTkNfS0VZIGlzIG5vdCBzZXQnKVxyXG4gIC8vIEFjY2VwdCAzMi1ieXRlIGJhc2U2NCBvciBoZXg7IG90aGVyd2lzZSBkZXJpdmUgdmlhIHNoYTI1NlxyXG4gIHRyeSB7XHJcbiAgICBpZiAocmF3Lmxlbmd0aCA9PT0gNDQgJiYgcmF3LmVuZHNXaXRoKCc9JykpIHJldHVybiBCdWZmZXIuZnJvbShyYXcsICdiYXNlNjQnKVxyXG4gICAgaWYgKHJhdy5sZW5ndGggPT09IDY0KSByZXR1cm4gQnVmZmVyLmZyb20ocmF3LCAnaGV4JylcclxuICB9IGNhdGNoIHt9XHJcbiAgcmV0dXJuIGNyeXB0by5jcmVhdGVIYXNoKCdzaGEyNTYnKS51cGRhdGUocmF3KS5kaWdlc3QoKVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZW5jcnlwdChwbGFpbnRleHQ6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgY29uc3Qga2V5ID0gZ2V0S2V5KClcclxuICBjb25zdCBpdiA9IGNyeXB0by5yYW5kb21CeXRlcygxMilcclxuICBjb25zdCBjaXBoZXIgPSBjcnlwdG8uY3JlYXRlQ2lwaGVyaXYoJ2Flcy0yNTYtZ2NtJywga2V5LCBpdilcclxuICBjb25zdCBlbmMgPSBCdWZmZXIuY29uY2F0KFtjaXBoZXIudXBkYXRlKHBsYWludGV4dCwgJ3V0ZjgnKSwgY2lwaGVyLmZpbmFsKCldKVxyXG4gIGNvbnN0IHRhZyA9IGNpcGhlci5nZXRBdXRoVGFnKClcclxuICByZXR1cm4gYCR7aXYudG9TdHJpbmcoJ2Jhc2U2NCcpfToke3RhZy50b1N0cmluZygnYmFzZTY0Jyl9OiR7ZW5jLnRvU3RyaW5nKCdiYXNlNjQnKX1gXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBkZWNyeXB0KHBhY2tlZDogc3RyaW5nKTogc3RyaW5nIHtcclxuICBjb25zdCBrZXkgPSBnZXRLZXkoKVxyXG4gIGNvbnN0IFtpdkI2NCwgdGFnQjY0LCBkYXRhQjY0XSA9IChwYWNrZWQgfHwgJycpLnNwbGl0KCc6JylcclxuICBpZiAoIWl2QjY0IHx8ICF0YWdCNjQgfHwgIWRhdGFCNjQpIHRocm93IG5ldyBFcnJvcignTWFsZm9ybWVkIGNpcGhlcnRleHQnKVxyXG4gIGNvbnN0IGl2ID0gQnVmZmVyLmZyb20oaXZCNjQsICdiYXNlNjQnKVxyXG4gIGNvbnN0IHRhZyA9IEJ1ZmZlci5mcm9tKHRhZ0I2NCwgJ2Jhc2U2NCcpXHJcbiAgY29uc3QgZGF0YSA9IEJ1ZmZlci5mcm9tKGRhdGFCNjQsICdiYXNlNjQnKVxyXG4gIGNvbnN0IGRlY2lwaGVyID0gY3J5cHRvLmNyZWF0ZURlY2lwaGVyaXYoJ2Flcy0yNTYtZ2NtJywga2V5LCBpdilcclxuICBkZWNpcGhlci5zZXRBdXRoVGFnKHRhZylcclxuICBjb25zdCBkZWMgPSBCdWZmZXIuY29uY2F0KFtkZWNpcGhlci51cGRhdGUoZGF0YSksIGRlY2lwaGVyLmZpbmFsKCldKVxyXG4gIHJldHVybiBkZWMudG9TdHJpbmcoJ3V0ZjgnKVxyXG59XHJcbiJdLCJuYW1lcyI6WyJjcnlwdG8iLCJnZXRLZXkiLCJyYXciLCJwcm9jZXNzIiwiZW52IiwiREVWSUNFX0NPREVfRU5DX0tFWSIsIkVycm9yIiwibGVuZ3RoIiwiZW5kc1dpdGgiLCJCdWZmZXIiLCJmcm9tIiwiY3JlYXRlSGFzaCIsInVwZGF0ZSIsImRpZ2VzdCIsImVuY3J5cHQiLCJwbGFpbnRleHQiLCJrZXkiLCJpdiIsInJhbmRvbUJ5dGVzIiwiY2lwaGVyIiwiY3JlYXRlQ2lwaGVyaXYiLCJlbmMiLCJjb25jYXQiLCJmaW5hbCIsInRhZyIsImdldEF1dGhUYWciLCJ0b1N0cmluZyIsImRlY3J5cHQiLCJwYWNrZWQiLCJpdkI2NCIsInRhZ0I2NCIsImRhdGFCNjQiLCJzcGxpdCIsImRhdGEiLCJkZWNpcGhlciIsImNyZWF0ZURlY2lwaGVyaXYiLCJzZXRBdXRoVGFnIiwiZGVjIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/server/crypto.ts\n");

/***/ }),

/***/ "(rsc)/./src/server/supabase.ts":
/*!********************************!*\
  !*** ./src/server/supabase.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   supabaseAdmin: () => (/* binding */ supabaseAdmin),\n/* harmony export */   supabaseServer: () => (/* binding */ supabaseServer)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"@supabase/supabase-js\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__);\n\nconst supabaseUrl = \"https://hewpwluinbwaizwqhmjc.supabase.co\";\nconst supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY;\nif (!supabaseUrl) {\n    throw new Error('Missing Supabase URL for server client');\n}\n// Server-only client with service role for bypassing RLS in admin operations (optional)\nconst supabaseAdmin = supabaseServiceKey ? (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseServiceKey, {\n    auth: {\n        autoRefreshToken: false,\n        persistSession: false\n    }\n}) : null;\n// Server client that respects RLS (uses anon key + user context)\nconst supabaseServer = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, \"sb_publishable_F1bepvhJ6cGvjDNRfj_QfA_ZcNq0USi\", {\n    auth: {\n        autoRefreshToken: false,\n        persistSession: false\n    }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvc2VydmVyL3N1cGFiYXNlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBb0Q7QUFFcEQsTUFBTUMsY0FBY0MsMENBQW9DO0FBQ3hELE1BQU1HLHFCQUFxQkgsUUFBUUMsR0FBRyxDQUFDRyx5QkFBeUI7QUFFaEUsSUFBSSxDQUFDTCxhQUFhO0lBQ2hCLE1BQU0sSUFBSU0sTUFBTTtBQUNsQjtBQUVBLHdGQUF3RjtBQUNqRixNQUFNQyxnQkFBZ0JILHFCQUN6QkwsbUVBQVlBLENBQUNDLGFBQWFJLG9CQUFvQjtJQUM1Q0ksTUFBTTtRQUNKQyxrQkFBa0I7UUFDbEJDLGdCQUFnQjtJQUNsQjtBQUNGLEtBQ0EsS0FBSTtBQUVSLGlFQUFpRTtBQUMxRCxNQUFNQyxpQkFBaUJaLG1FQUFZQSxDQUN4Q0MsYUFDQUMsZ0RBQXlDLEVBQ3pDO0lBQ0VPLE1BQU07UUFDSkMsa0JBQWtCO1FBQ2xCQyxnQkFBZ0I7SUFDbEI7QUFDRixHQUNEIiwic291cmNlcyI6WyJEOlxcRGVsdGEgSVZcXFNvZndhcmVzXFxnbGFzc1xcc2FuZGJveFxcc2hhZGNuLWNybS1kYXNoYm9hcmRcXHNyY1xcc2VydmVyXFxzdXBhYmFzZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnXG5cbmNvbnN0IHN1cGFiYXNlVXJsID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMXG5jb25zdCBzdXBhYmFzZVNlcnZpY2VLZXkgPSBwcm9jZXNzLmVudi5TVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZXG5cbmlmICghc3VwYWJhc2VVcmwpIHtcbiAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIFN1cGFiYXNlIFVSTCBmb3Igc2VydmVyIGNsaWVudCcpXG59XG5cbi8vIFNlcnZlci1vbmx5IGNsaWVudCB3aXRoIHNlcnZpY2Ugcm9sZSBmb3IgYnlwYXNzaW5nIFJMUyBpbiBhZG1pbiBvcGVyYXRpb25zIChvcHRpb25hbClcbmV4cG9ydCBjb25zdCBzdXBhYmFzZUFkbWluID0gc3VwYWJhc2VTZXJ2aWNlS2V5XG4gID8gY3JlYXRlQ2xpZW50KHN1cGFiYXNlVXJsLCBzdXBhYmFzZVNlcnZpY2VLZXksIHtcbiAgICAgIGF1dGg6IHtcbiAgICAgICAgYXV0b1JlZnJlc2hUb2tlbjogZmFsc2UsXG4gICAgICAgIHBlcnNpc3RTZXNzaW9uOiBmYWxzZSxcbiAgICAgIH0sXG4gICAgfSlcbiAgOiBudWxsXG5cbi8vIFNlcnZlciBjbGllbnQgdGhhdCByZXNwZWN0cyBSTFMgKHVzZXMgYW5vbiBrZXkgKyB1c2VyIGNvbnRleHQpXG5leHBvcnQgY29uc3Qgc3VwYWJhc2VTZXJ2ZXIgPSBjcmVhdGVDbGllbnQoXG4gIHN1cGFiYXNlVXJsLFxuICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSEsXG4gIHtcbiAgICBhdXRoOiB7XG4gICAgICBhdXRvUmVmcmVzaFRva2VuOiBmYWxzZSxcbiAgICAgIHBlcnNpc3RTZXNzaW9uOiBmYWxzZSxcbiAgICB9LFxuICB9XG4pXG4iXSwibmFtZXMiOlsiY3JlYXRlQ2xpZW50Iiwic3VwYWJhc2VVcmwiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwic3VwYWJhc2VTZXJ2aWNlS2V5IiwiU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSIsIkVycm9yIiwic3VwYWJhc2VBZG1pbiIsImF1dGgiLCJhdXRvUmVmcmVzaFRva2VuIiwicGVyc2lzdFNlc3Npb24iLCJzdXBhYmFzZVNlcnZlciIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/server/supabase.ts\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/next@15.2.2_@playwright+test@1.57.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!*********************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@15.2.2_@playwright+test@1.57.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \*********************************************************************************************************************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "@supabase/ssr":
/*!********************************!*\
  !*** external "@supabase/ssr" ***!
  \********************************/
/***/ ((module) => {

"use strict";
module.exports = require("@supabase/ssr");

/***/ }),

/***/ "@supabase/supabase-js":
/*!****************************************!*\
  !*** external "@supabase/supabase-js" ***!
  \****************************************/
/***/ ((module) => {

"use strict";
module.exports = require("@supabase/supabase-js");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next@15.2.2_@playwright+test@1.57.0_react-dom@18.3.1_react@18.3.1__react@18.3.1"], () => (__webpack_exec__("(rsc)/./node_modules/.pnpm/next@15.2.2_@playwright+test@1.57.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fdevice-auth%2Fcreate%2Froute&page=%2Fapi%2Fdevice-auth%2Fcreate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdevice-auth%2Fcreate%2Froute.ts&appDir=D%3A%5CDelta%20IV%5CSofwares%5Cglass%5Csandbox%5Cshadcn-crm-dashboard%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CDelta%20IV%5CSofwares%5Cglass%5Csandbox%5Cshadcn-crm-dashboard&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();